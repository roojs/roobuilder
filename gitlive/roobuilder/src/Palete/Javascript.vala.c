/* Javascript.vala.c generated by valac, the Vala compiler
 * generated from Javascript.vala, do not modify */

/*
extern JSCore.Value jscore_object_call_as_function(
JSCore.Context ctx,
JSCore.Object object, 
JSCore.Object thisObject,
string  val,
out JSCore.Value exception
);

*/

#include <glib.h>
#include <glib-object.h>
#include <JavaScriptCore/JavaScript.h>
#include <stdlib.h>
#include <string.h>
#include <float.h>
#include <math.h>
#include <glib/gstdio.h>
#include <gobject/gvaluecollector.h>

#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define PALETE_TYPE_JAVASCRIPT (palete_javascript_get_type ())
#define PALETE_JAVASCRIPT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PALETE_TYPE_JAVASCRIPT, PaleteJavascript))
#define PALETE_JAVASCRIPT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PALETE_TYPE_JAVASCRIPT, PaleteJavascriptClass))
#define PALETE_IS_JAVASCRIPT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PALETE_TYPE_JAVASCRIPT))
#define PALETE_IS_JAVASCRIPT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PALETE_TYPE_JAVASCRIPT))
#define PALETE_JAVASCRIPT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PALETE_TYPE_JAVASCRIPT, PaleteJavascriptClass))

typedef struct _PaleteJavascript PaleteJavascript;
typedef struct _PaleteJavascriptClass PaleteJavascriptClass;
typedef struct _PaleteJavascriptPrivate PaleteJavascriptPrivate;
#define _JSGlobalContextRelease0(var) ((var == NULL) ? NULL : (var = (JSGlobalContextRelease (var), NULL)))
#define _0(var) ((var == NULL) ? NULL : (var = ( (var), NULL)))
#define _JSClassRelease0(var) ((var == NULL) ? NULL : (var = (JSClassRelease (var), NULL)))
#define _palete_javascript_unref0(var) ((var == NULL) ? NULL : (var = (palete_javascript_unref (var), NULL)))
#define _JSStringRelease0(var) ((var == NULL) ? NULL : (var = (JSStringRelease (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _PaleteParamSpecJavascript PaleteParamSpecJavascript;

typedef enum  {
	PALETE_JAVASCRIPT_ERROR_MISSING_METHOD,
	PALETE_JAVASCRIPT_ERROR_MISSING_FILE
} PaleteJavascriptError;
#define PALETE_JAVASCRIPT_ERROR palete_javascript_error_quark ()
struct _PaleteJavascript {
	GTypeInstance parent_instance;
	volatile int ref_count;
	PaleteJavascriptPrivate * priv;
	void* js_global_context;
};

struct _PaleteJavascriptClass {
	GTypeClass parent_class;
	void (*finalize) (PaleteJavascript *self);
};

struct _PaleteParamSpecJavascript {
	GParamSpec parent_instance;
};

VALA_EXTERN PaleteJavascript* palete_instance;
PaleteJavascript* palete_instance = NULL;
static gpointer palete_javascript_parent_class = NULL;

VALA_EXTERN GQuark palete_javascript_error_quark (void);
VALA_EXTERN gpointer palete_javascript_ref (gpointer instance);
VALA_EXTERN void palete_javascript_unref (gpointer instance);
VALA_EXTERN GParamSpec* palete_param_spec_javascript (const gchar* name,
                                          const gchar* nick,
                                          const gchar* blurb,
                                          GType object_type,
                                          GParamFlags flags);
VALA_EXTERN void palete_value_set_javascript (GValue* value,
                                  gpointer v_object);
VALA_EXTERN void palete_value_take_javascript (GValue* value,
                                   gpointer v_object);
VALA_EXTERN gpointer palete_value_get_javascript (const GValue* value);
VALA_EXTERN GType palete_javascript_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (PaleteJavascript, palete_javascript_unref)
VALA_EXTERN JSObjectRef* palete_javascript_class_constructor (void* ctx,
                                                  JSObjectRef* constructor,
                                                  void** arguments,
                                                  gint arguments_length1,
                                                  void** exception);
static JSObjectRef* _palete_javascript_class_constructor_js_core_object_call_as_constructor_callback (void* ctx,
                                                                                               JSObjectRef* constructor,
                                                                                               size_t arguments_length1,
                                                                                               void** arguments,
                                                                                               void** exception);
VALA_EXTERN PaleteJavascript* palete_javascript_singleton (void);
VALA_EXTERN PaleteJavascript* palete_javascript_new (void);
VALA_EXTERN PaleteJavascript* palete_javascript_construct (GType object_type);
VALA_EXTERN gint palete_javascript_validate (PaleteJavascript* self,
                                 const gchar* code,
                                 gchar** res);
VALA_EXTERN gchar* palete_javascript_executeFile (PaleteJavascript* self,
                                      const gchar* fname,
                                      const gchar* call_method,
                                      const gchar* js_data,
                                      GError** error);
static void palete_javascript_finalize (PaleteJavascript * obj);
static GType palete_javascript_get_type_once (void);
static inline gpointer _vala_memdup2 (gconstpointer mem,
                        gsize byte_size);

static const JSStaticFunction PALETE_JAVASCRIPT_class_functions[1] = {{NULL, NULL, 0}};
static const JSClassDefinition PALETE_JAVASCRIPT_class_definition = {0, kJSClassAttributeNone, "App", NULL, NULL, PALETE_JAVASCRIPT_class_functions, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, _palete_javascript_class_constructor_js_core_object_call_as_constructor_callback, NULL, NULL};

GQuark
palete_javascript_error_quark (void)
{
	return g_quark_from_static_string ("palete-javascript-error-quark");
}

static JSObjectRef*
_palete_javascript_class_constructor_js_core_object_call_as_constructor_callback (void* ctx,
                                                                                  JSObjectRef* constructor,
                                                                                  size_t arguments_length1,
                                                                                  void** arguments,
                                                                                  void** exception)
{
	JSObjectRef* result;
	result = palete_javascript_class_constructor (ctx, constructor, arguments, arguments_length1, exception);
#line 40 "Javascript.vala"
	return result;
#line 141 "Javascript.vala.c"
}

JSObjectRef*
palete_javascript_class_constructor (void* ctx,
                                     JSObjectRef* constructor,
                                     void** arguments,
                                     gint arguments_length1,
                                     void** exception)
{
	void* _vala_exception = NULL;
	void* c = NULL;
	void* _tmp0_;
	JSObjectRef* o = NULL;
	JSObjectRef* _tmp1_;
	JSObjectRef* result;
#line 32 "Javascript.vala"
	_tmp0_ = JSClassCreate (&PALETE_JAVASCRIPT_class_definition);
#line 32 "Javascript.vala"
	c = _tmp0_;
#line 33 "Javascript.vala"
	_tmp1_ = JSObjectMake (ctx, c, NULL);
#line 33 "Javascript.vala"
	o = _tmp1_;
#line 34 "Javascript.vala"
	_0 (_vala_exception);
#line 34 "Javascript.vala"
	_vala_exception = NULL;
#line 35 "Javascript.vala"
	result = o;
#line 35 "Javascript.vala"
	_JSClassRelease0 (c);
#line 35 "Javascript.vala"
	if (exception) {
#line 35 "Javascript.vala"
		*exception = _vala_exception;
#line 177 "Javascript.vala.c"
	} else {
#line 35 "Javascript.vala"
		_0 (_vala_exception);
#line 181 "Javascript.vala.c"
	}
#line 35 "Javascript.vala"
	return result;
#line 185 "Javascript.vala.c"
}

static gpointer
_palete_javascript_ref0 (gpointer self)
{
#line 72 "Javascript.vala"
	return self ? palete_javascript_ref (self) : NULL;
#line 193 "Javascript.vala.c"
}

PaleteJavascript*
palete_javascript_singleton (void)
{
	PaleteJavascript* _tmp0_;
	PaleteJavascript* _tmp2_;
	PaleteJavascript* _tmp3_;
	PaleteJavascript* result;
#line 69 "Javascript.vala"
	_tmp0_ = palete_instance;
#line 69 "Javascript.vala"
	if (_tmp0_ == NULL) {
#line 207 "Javascript.vala.c"
		PaleteJavascript* _tmp1_;
#line 70 "Javascript.vala"
		_tmp1_ = palete_javascript_new ();
#line 70 "Javascript.vala"
		_palete_javascript_unref0 (palete_instance);
#line 70 "Javascript.vala"
		palete_instance = _tmp1_;
#line 215 "Javascript.vala.c"
	}
#line 72 "Javascript.vala"
	_tmp2_ = palete_instance;
#line 72 "Javascript.vala"
	_tmp3_ = _palete_javascript_ref0 (_tmp2_);
#line 72 "Javascript.vala"
	result = _tmp3_;
#line 72 "Javascript.vala"
	return result;
#line 225 "Javascript.vala.c"
}

PaleteJavascript*
palete_javascript_construct (GType object_type)
{
	PaleteJavascript* self = NULL;
	void* goc = NULL;
	void* _tmp0_;
	void* _tmp1_;
#line 74 "Javascript.vala"
	self = (PaleteJavascript*) g_type_create_instance (object_type);
#line 76 "Javascript.vala"
	_tmp0_ = JSClassCreate (&PALETE_JAVASCRIPT_class_definition);
#line 76 "Javascript.vala"
	goc = _tmp0_;
#line 77 "Javascript.vala"
	_tmp1_ = JSGlobalContextCreate (goc);
#line 77 "Javascript.vala"
	_JSGlobalContextRelease0 (self->js_global_context);
#line 77 "Javascript.vala"
	self->js_global_context = _tmp1_;
#line 74 "Javascript.vala"
	_JSClassRelease0 (goc);
#line 74 "Javascript.vala"
	return self;
#line 251 "Javascript.vala.c"
}

PaleteJavascript*
palete_javascript_new (void)
{
#line 74 "Javascript.vala"
	return palete_javascript_construct (PALETE_TYPE_JAVASCRIPT);
#line 259 "Javascript.vala.c"
}

gint
palete_javascript_validate (PaleteJavascript* self,
                            const gchar* code,
                            gchar** res)
{
	gchar* _vala_res = NULL;
	void* ex = NULL;
	void* ctx = NULL;
	void* _tmp0_;
	void* _tmp1_;
	void* _tmp2_;
	void* _tmp3_;
	void* _tmp4_ = NULL;
	gchar* _tmp5_;
	void* _tmp6_;
	void* _tmp7_;
	JSObjectRef* exo = NULL;
	void* _tmp8_;
	void* _tmp9_;
	JSObjectRef* _tmp10_;
	void* js_string = NULL;
	void* _tmp11_;
	gdouble line = 0.0;
	JSObjectRef* _tmp12_;
	void* _tmp13_;
	void* _tmp14_;
	void* _tmp15_;
	void* _tmp16_;
	void* _tmp17_;
	gdouble _tmp18_;
	gchar* c_string = NULL;
	gchar* _tmp19_;
	void* err_string = NULL;
	void* _tmp20_;
	void* _tmp21_;
	void* _tmp22_;
	void* _tmp23_;
	gchar* _tmp24_;
	gchar* _tmp25_;
	gchar* _tmp26_;
	gint rline = 0;
	gint _tmp27_ = 0;
	gint result;
#line 84 "Javascript.vala"
	_tmp0_ = self->js_global_context;
#line 84 "Javascript.vala"
	ctx = _tmp0_;
#line 85 "Javascript.vala"
	_tmp1_ = self->js_global_context;
#line 85 "Javascript.vala"
	_tmp2_ = JSStringCreateWithUTF8CString (code);
#line 85 "Javascript.vala"
	_tmp3_ = _tmp2_;
#line 85 "Javascript.vala"
	JSCheckScriptSyntax (_tmp1_, _tmp3_, NULL, 0, &_tmp4_);
#line 85 "Javascript.vala"
	_0 (ex);
#line 85 "Javascript.vala"
	ex = _tmp4_;
#line 85 "Javascript.vala"
	_JSStringRelease0 (_tmp3_);
#line 91 "Javascript.vala"
	_tmp5_ = g_strdup ("");
#line 91 "Javascript.vala"
	_g_free0 (_vala_res);
#line 91 "Javascript.vala"
	_vala_res = _tmp5_;
#line 92 "Javascript.vala"
	_tmp6_ = ex;
#line 92 "Javascript.vala"
	_tmp7_ = ctx;
#line 92 "Javascript.vala"
	if (JSValueIsNull (_tmp7_, _tmp6_)) {
#line 93 "Javascript.vala"
		result = -1;
#line 93 "Javascript.vala"
		_0 (ex);
#line 93 "Javascript.vala"
		if (res) {
#line 93 "Javascript.vala"
			*res = _vala_res;
#line 343 "Javascript.vala.c"
		} else {
#line 93 "Javascript.vala"
			_g_free0 (_vala_res);
#line 347 "Javascript.vala.c"
		}
#line 93 "Javascript.vala"
		return result;
#line 351 "Javascript.vala.c"
	}
#line 97 "Javascript.vala"
	_tmp8_ = ex;
#line 97 "Javascript.vala"
	_tmp9_ = ctx;
#line 97 "Javascript.vala"
	_tmp10_ = JSValueToObject (_tmp9_, _tmp8_, NULL);
#line 97 "Javascript.vala"
	exo = _tmp10_;
#line 103 "Javascript.vala"
	_tmp11_ = JSStringCreateWithUTF8CString ("line");
#line 103 "Javascript.vala"
	js_string = _tmp11_;
#line 104 "Javascript.vala"
	_tmp12_ = exo;
#line 104 "Javascript.vala"
	_tmp13_ = ctx;
#line 104 "Javascript.vala"
	_tmp14_ = js_string;
#line 104 "Javascript.vala"
	_tmp15_ = JSObjectGetProperty (_tmp13_, _tmp12_, _tmp14_, NULL);
#line 104 "Javascript.vala"
	_tmp16_ = _tmp15_;
#line 104 "Javascript.vala"
	_tmp17_ = ctx;
#line 104 "Javascript.vala"
	_tmp18_ = JSValueToNumber (_tmp17_, _tmp16_, NULL);
#line 104 "Javascript.vala"
	_0 (_tmp16_);
#line 104 "Javascript.vala"
	line = _tmp18_;
#line 109 "Javascript.vala"
	_tmp19_ = g_new0 (gchar, 1024);
#line 109 "Javascript.vala"
	c_string = _tmp19_;
#line 110 "Javascript.vala"
	_tmp20_ = ex;
#line 110 "Javascript.vala"
	_tmp21_ = ctx;
#line 110 "Javascript.vala"
	_tmp22_ = JSValueToStringCopy (_tmp21_, _tmp20_, NULL);
#line 110 "Javascript.vala"
	err_string = _tmp22_;
#line 111 "Javascript.vala"
	_tmp23_ = err_string;
#line 111 "Javascript.vala"
	_tmp24_ = c_string;
#line 111 "Javascript.vala"
	JSStringGetUTF8CString (_tmp23_, _tmp24_, (gsize) 1023);
#line 112 "Javascript.vala"
	_tmp25_ = c_string;
#line 112 "Javascript.vala"
	_tmp26_ = g_strdup ((const gchar*) _tmp25_);
#line 112 "Javascript.vala"
	_g_free0 (_vala_res);
#line 112 "Javascript.vala"
	_vala_res = _tmp26_;
#line 115 "Javascript.vala"
	rline = (gint) line;
#line 117 "Javascript.vala"
	if (rline > 0) {
#line 117 "Javascript.vala"
		_tmp27_ = rline - 1;
#line 415 "Javascript.vala.c"
	} else {
#line 117 "Javascript.vala"
		_tmp27_ = 0;
#line 419 "Javascript.vala.c"
	}
#line 117 "Javascript.vala"
	result = _tmp27_;
#line 117 "Javascript.vala"
	_JSStringRelease0 (err_string);
#line 117 "Javascript.vala"
	_JSStringRelease0 (js_string);
#line 117 "Javascript.vala"
	_0 (exo);
#line 117 "Javascript.vala"
	_0 (ex);
#line 117 "Javascript.vala"
	if (res) {
#line 117 "Javascript.vala"
		*res = _vala_res;
#line 435 "Javascript.vala.c"
	} else {
#line 117 "Javascript.vala"
		_g_free0 (_vala_res);
#line 439 "Javascript.vala.c"
	}
#line 117 "Javascript.vala"
	return result;
#line 443 "Javascript.vala.c"
}

/**
 * extension API concept..
 * javascript file.. loaded into jscore, 
 * then a method is called, with a string argument (json encoded)
 * 
 */
gchar*
palete_javascript_executeFile (PaleteJavascript* self,
                               const gchar* fname,
                               const gchar* call_method,
                               const gchar* js_data,
                               GError** error)
{
	gchar* file_data = NULL;
	void* jfile_data = NULL;
	const gchar* _tmp5_;
	void* _tmp6_;
	void* jmethod = NULL;
	void* _tmp7_;
	void* exa = NULL;
	void* exb = NULL;
	void* exc = NULL;
	void* exd = NULL;
	void* exe = NULL;
	void* goc = NULL;
	void* _tmp8_;
	void* ctx = NULL;
	void* _tmp9_;
	void* _tmp10_;
	JSObjectRef* othis = NULL;
	void* _tmp11_;
	JSObjectRef* _tmp12_;
	void* _tmp13_;
	void* _tmp14_;
	JSObjectRef* _tmp15_;
	void* _tmp16_ = NULL;
	void* _tmp17_;
	void* _tmp18_;
	JSObjectRef* _tmp19_;
	void* _tmp20_;
	void* _tmp21_;
	void* val = NULL;
	JSObjectRef* _tmp23_;
	void* _tmp24_;
	void* _tmp25_;
	void* _tmp26_ = NULL;
	void* _tmp27_;
	void* _tmp28_;
	void* _tmp29_;
	JSObjectRef* oval = NULL;
	void* _tmp31_;
	void* _tmp32_;
	void* _tmp33_ = NULL;
	JSObjectRef* _tmp34_;
	JSObjectRef* _tmp35_;
	void* _tmp36_;
	GError* _tmp38_;
	gchar* _tmp39_;
	GError* _inner_error0_ = NULL;
	gchar* result;
#line 132 "Javascript.vala"
	if (!g_file_test (fname, G_FILE_TEST_EXISTS)) {
#line 508 "Javascript.vala.c"
		GError* _tmp0_;
#line 133 "Javascript.vala"
		_tmp0_ = g_error_new (PALETE_JAVASCRIPT_ERROR, PALETE_JAVASCRIPT_ERROR_MISSING_FILE, "Plugin: file not found %s", fname);
#line 133 "Javascript.vala"
		_inner_error0_ = _tmp0_;
#line 133 "Javascript.vala"
		if (_inner_error0_->domain == PALETE_JAVASCRIPT_ERROR) {
#line 133 "Javascript.vala"
			g_propagate_error (error, _inner_error0_);
#line 133 "Javascript.vala"
			_g_free0 (file_data);
#line 133 "Javascript.vala"
			return NULL;
#line 522 "Javascript.vala.c"
		} else {
#line 133 "Javascript.vala"
			_g_free0 (file_data);
#line 133 "Javascript.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 133 "Javascript.vala"
			g_clear_error (&_inner_error0_);
#line 133 "Javascript.vala"
			return NULL;
#line 532 "Javascript.vala.c"
		}
	}
	{
		gchar* _tmp1_ = NULL;
#line 136 "Javascript.vala"
		g_file_get_contents (fname, &_tmp1_, NULL, &_inner_error0_);
#line 136 "Javascript.vala"
		_g_free0 (file_data);
#line 136 "Javascript.vala"
		file_data = _tmp1_;
#line 136 "Javascript.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 545 "Javascript.vala.c"
			goto __catch0_g_error;
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp2_;
		const gchar* _tmp3_;
		gchar* _tmp4_;
#line 135 "Javascript.vala"
		e = _inner_error0_;
#line 135 "Javascript.vala"
		_inner_error0_ = NULL;
#line 138 "Javascript.vala"
		_tmp2_ = e;
#line 138 "Javascript.vala"
		_tmp3_ = _tmp2_->message;
#line 138 "Javascript.vala"
		g_debug ("Javascript.vala:138: Error file load failed: %s", _tmp3_);
#line 139 "Javascript.vala"
		_tmp4_ = g_strdup ("");
#line 139 "Javascript.vala"
		result = _tmp4_;
#line 139 "Javascript.vala"
		_g_error_free0 (e);
#line 139 "Javascript.vala"
		_g_free0 (file_data);
#line 139 "Javascript.vala"
		return result;
#line 576 "Javascript.vala.c"
	}
	__finally0:
#line 135 "Javascript.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 135 "Javascript.vala"
		if (_inner_error0_->domain == PALETE_JAVASCRIPT_ERROR) {
#line 135 "Javascript.vala"
			g_propagate_error (error, _inner_error0_);
#line 135 "Javascript.vala"
			_g_free0 (file_data);
#line 135 "Javascript.vala"
			return NULL;
#line 589 "Javascript.vala.c"
		} else {
#line 135 "Javascript.vala"
			_g_free0 (file_data);
#line 135 "Javascript.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 135 "Javascript.vala"
			g_clear_error (&_inner_error0_);
#line 135 "Javascript.vala"
			return NULL;
#line 599 "Javascript.vala.c"
		}
	}
#line 141 "Javascript.vala"
	_tmp5_ = file_data;
#line 141 "Javascript.vala"
	_tmp6_ = JSStringCreateWithUTF8CString (_tmp5_);
#line 141 "Javascript.vala"
	jfile_data = _tmp6_;
#line 142 "Javascript.vala"
	_tmp7_ = JSStringCreateWithUTF8CString (call_method);
#line 142 "Javascript.vala"
	jmethod = _tmp7_;
#line 151 "Javascript.vala"
	_tmp8_ = JSClassCreate (&PALETE_JAVASCRIPT_class_definition);
#line 151 "Javascript.vala"
	goc = _tmp8_;
#line 152 "Javascript.vala"
	_tmp9_ = goc;
#line 152 "Javascript.vala"
	_tmp10_ = JSGlobalContextCreate (_tmp9_);
#line 152 "Javascript.vala"
	ctx = _tmp10_;
#line 153 "Javascript.vala"
	_tmp11_ = ctx;
#line 153 "Javascript.vala"
	_tmp12_ = JSContextGetGlobalObject (_tmp11_);
#line 153 "Javascript.vala"
	othis = _tmp12_;
#line 155 "Javascript.vala"
	_tmp13_ = ctx;
#line 155 "Javascript.vala"
	_tmp14_ = jfile_data;
#line 155 "Javascript.vala"
	_tmp15_ = othis;
#line 155 "Javascript.vala"
	_tmp17_ = JSEvaluateScript (_tmp13_, _tmp14_, _tmp15_, NULL, 0, &_tmp16_);
#line 155 "Javascript.vala"
	_0 (exa);
#line 155 "Javascript.vala"
	exa = _tmp16_;
#line 155 "Javascript.vala"
	_tmp18_ = _tmp17_;
#line 155 "Javascript.vala"
	_0 (_tmp18_);
#line 164 "Javascript.vala"
	_tmp19_ = othis;
#line 164 "Javascript.vala"
	_tmp20_ = ctx;
#line 164 "Javascript.vala"
	_tmp21_ = jmethod;
#line 164 "Javascript.vala"
	if (!JSObjectHasProperty (_tmp20_, _tmp19_, _tmp21_)) {
#line 652 "Javascript.vala.c"
		GError* _tmp22_;
#line 165 "Javascript.vala"
		_tmp22_ = g_error_new (PALETE_JAVASCRIPT_ERROR, PALETE_JAVASCRIPT_ERROR_MISSING_METHOD, "Plugin: missing method  %s", call_method);
#line 165 "Javascript.vala"
		_inner_error0_ = _tmp22_;
#line 165 "Javascript.vala"
		if (_inner_error0_->domain == PALETE_JAVASCRIPT_ERROR) {
#line 165 "Javascript.vala"
			g_propagate_error (error, _inner_error0_);
#line 165 "Javascript.vala"
			_0 (othis);
#line 165 "Javascript.vala"
			_JSGlobalContextRelease0 (ctx);
#line 165 "Javascript.vala"
			_JSClassRelease0 (goc);
#line 165 "Javascript.vala"
			_0 (exd);
#line 165 "Javascript.vala"
			_0 (exb);
#line 165 "Javascript.vala"
			_0 (exa);
#line 165 "Javascript.vala"
			_JSStringRelease0 (jmethod);
#line 165 "Javascript.vala"
			_JSStringRelease0 (jfile_data);
#line 165 "Javascript.vala"
			_g_free0 (file_data);
#line 165 "Javascript.vala"
			return NULL;
#line 682 "Javascript.vala.c"
		} else {
#line 165 "Javascript.vala"
			_0 (othis);
#line 165 "Javascript.vala"
			_JSGlobalContextRelease0 (ctx);
#line 165 "Javascript.vala"
			_JSClassRelease0 (goc);
#line 165 "Javascript.vala"
			_0 (exd);
#line 165 "Javascript.vala"
			_0 (exb);
#line 165 "Javascript.vala"
			_0 (exa);
#line 165 "Javascript.vala"
			_JSStringRelease0 (jmethod);
#line 165 "Javascript.vala"
			_JSStringRelease0 (jfile_data);
#line 165 "Javascript.vala"
			_g_free0 (file_data);
#line 165 "Javascript.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 165 "Javascript.vala"
			g_clear_error (&_inner_error0_);
#line 165 "Javascript.vala"
			return NULL;
#line 708 "Javascript.vala.c"
		}
	}
#line 169 "Javascript.vala"
	_tmp23_ = othis;
#line 169 "Javascript.vala"
	_tmp24_ = ctx;
#line 169 "Javascript.vala"
	_tmp25_ = jmethod;
#line 169 "Javascript.vala"
	_tmp27_ = JSObjectGetProperty (_tmp24_, _tmp23_, _tmp25_, &_tmp26_);
#line 169 "Javascript.vala"
	_0 (exb);
#line 169 "Javascript.vala"
	exb = _tmp26_;
#line 169 "Javascript.vala"
	val = _tmp27_;
#line 171 "Javascript.vala"
	_tmp28_ = val;
#line 171 "Javascript.vala"
	_tmp29_ = ctx;
#line 171 "Javascript.vala"
	if (!JSValueIsObject (_tmp29_, _tmp28_)) {
#line 731 "Javascript.vala.c"
		GError* _tmp30_;
#line 172 "Javascript.vala"
		_tmp30_ = g_error_new (PALETE_JAVASCRIPT_ERROR, PALETE_JAVASCRIPT_ERROR_MISSING_METHOD, "Plugin: not a property not found  %s", call_method);
#line 172 "Javascript.vala"
		_inner_error0_ = _tmp30_;
#line 172 "Javascript.vala"
		if (_inner_error0_->domain == PALETE_JAVASCRIPT_ERROR) {
#line 172 "Javascript.vala"
			g_propagate_error (error, _inner_error0_);
#line 172 "Javascript.vala"
			_0 (val);
#line 172 "Javascript.vala"
			_0 (othis);
#line 172 "Javascript.vala"
			_JSGlobalContextRelease0 (ctx);
#line 172 "Javascript.vala"
			_JSClassRelease0 (goc);
#line 172 "Javascript.vala"
			_0 (exd);
#line 172 "Javascript.vala"
			_0 (exb);
#line 172 "Javascript.vala"
			_0 (exa);
#line 172 "Javascript.vala"
			_JSStringRelease0 (jmethod);
#line 172 "Javascript.vala"
			_JSStringRelease0 (jfile_data);
#line 172 "Javascript.vala"
			_g_free0 (file_data);
#line 172 "Javascript.vala"
			return NULL;
#line 763 "Javascript.vala.c"
		} else {
#line 172 "Javascript.vala"
			_0 (val);
#line 172 "Javascript.vala"
			_0 (othis);
#line 172 "Javascript.vala"
			_JSGlobalContextRelease0 (ctx);
#line 172 "Javascript.vala"
			_JSClassRelease0 (goc);
#line 172 "Javascript.vala"
			_0 (exd);
#line 172 "Javascript.vala"
			_0 (exb);
#line 172 "Javascript.vala"
			_0 (exa);
#line 172 "Javascript.vala"
			_JSStringRelease0 (jmethod);
#line 172 "Javascript.vala"
			_JSStringRelease0 (jfile_data);
#line 172 "Javascript.vala"
			_g_free0 (file_data);
#line 172 "Javascript.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 172 "Javascript.vala"
			g_clear_error (&_inner_error0_);
#line 172 "Javascript.vala"
			return NULL;
#line 791 "Javascript.vala.c"
		}
	}
#line 174 "Javascript.vala"
	_tmp31_ = val;
#line 174 "Javascript.vala"
	_tmp32_ = ctx;
#line 174 "Javascript.vala"
	_tmp34_ = JSValueToObject (_tmp32_, _tmp31_, &_tmp33_);
#line 174 "Javascript.vala"
	exc = _tmp33_;
#line 174 "Javascript.vala"
	oval = _tmp34_;
#line 176 "Javascript.vala"
	_tmp35_ = oval;
#line 176 "Javascript.vala"
	_tmp36_ = ctx;
#line 176 "Javascript.vala"
	if (!JSObjectIsFunction (_tmp36_, _tmp35_)) {
#line 810 "Javascript.vala.c"
		GError* _tmp37_;
#line 177 "Javascript.vala"
		_tmp37_ = g_error_new (PALETE_JAVASCRIPT_ERROR, PALETE_JAVASCRIPT_ERROR_MISSING_METHOD, "Plugin: not a method  %s", call_method);
#line 177 "Javascript.vala"
		_inner_error0_ = _tmp37_;
#line 177 "Javascript.vala"
		if (_inner_error0_->domain == PALETE_JAVASCRIPT_ERROR) {
#line 177 "Javascript.vala"
			g_propagate_error (error, _inner_error0_);
#line 177 "Javascript.vala"
			_0 (oval);
#line 177 "Javascript.vala"
			_0 (val);
#line 177 "Javascript.vala"
			_0 (othis);
#line 177 "Javascript.vala"
			_JSGlobalContextRelease0 (ctx);
#line 177 "Javascript.vala"
			_JSClassRelease0 (goc);
#line 177 "Javascript.vala"
			_0 (exd);
#line 177 "Javascript.vala"
			_0 (exb);
#line 177 "Javascript.vala"
			_0 (exa);
#line 177 "Javascript.vala"
			_JSStringRelease0 (jmethod);
#line 177 "Javascript.vala"
			_JSStringRelease0 (jfile_data);
#line 177 "Javascript.vala"
			_g_free0 (file_data);
#line 177 "Javascript.vala"
			return NULL;
#line 844 "Javascript.vala.c"
		} else {
#line 177 "Javascript.vala"
			_0 (oval);
#line 177 "Javascript.vala"
			_0 (val);
#line 177 "Javascript.vala"
			_0 (othis);
#line 177 "Javascript.vala"
			_JSGlobalContextRelease0 (ctx);
#line 177 "Javascript.vala"
			_JSClassRelease0 (goc);
#line 177 "Javascript.vala"
			_0 (exd);
#line 177 "Javascript.vala"
			_0 (exb);
#line 177 "Javascript.vala"
			_0 (exa);
#line 177 "Javascript.vala"
			_JSStringRelease0 (jmethod);
#line 177 "Javascript.vala"
			_JSStringRelease0 (jfile_data);
#line 177 "Javascript.vala"
			_g_free0 (file_data);
#line 177 "Javascript.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 177 "Javascript.vala"
			g_clear_error (&_inner_error0_);
#line 177 "Javascript.vala"
			return NULL;
#line 874 "Javascript.vala.c"
		}
	}
#line 179 "Javascript.vala"
	_tmp38_ = g_error_new_literal (PALETE_JAVASCRIPT_ERROR, PALETE_JAVASCRIPT_ERROR_MISSING_METHOD, "Plugin: not supported anymore");
#line 179 "Javascript.vala"
	_inner_error0_ = _tmp38_;
#line 179 "Javascript.vala"
	if (_inner_error0_->domain == PALETE_JAVASCRIPT_ERROR) {
#line 179 "Javascript.vala"
		g_propagate_error (error, _inner_error0_);
#line 179 "Javascript.vala"
		_0 (oval);
#line 179 "Javascript.vala"
		_0 (val);
#line 179 "Javascript.vala"
		_0 (othis);
#line 179 "Javascript.vala"
		_JSGlobalContextRelease0 (ctx);
#line 179 "Javascript.vala"
		_JSClassRelease0 (goc);
#line 179 "Javascript.vala"
		_0 (exd);
#line 179 "Javascript.vala"
		_0 (exb);
#line 179 "Javascript.vala"
		_0 (exa);
#line 179 "Javascript.vala"
		_JSStringRelease0 (jmethod);
#line 179 "Javascript.vala"
		_JSStringRelease0 (jfile_data);
#line 179 "Javascript.vala"
		_g_free0 (file_data);
#line 179 "Javascript.vala"
		return NULL;
#line 909 "Javascript.vala.c"
	} else {
#line 179 "Javascript.vala"
		_0 (oval);
#line 179 "Javascript.vala"
		_0 (val);
#line 179 "Javascript.vala"
		_0 (othis);
#line 179 "Javascript.vala"
		_JSGlobalContextRelease0 (ctx);
#line 179 "Javascript.vala"
		_JSClassRelease0 (goc);
#line 179 "Javascript.vala"
		_0 (exd);
#line 179 "Javascript.vala"
		_0 (exb);
#line 179 "Javascript.vala"
		_0 (exa);
#line 179 "Javascript.vala"
		_JSStringRelease0 (jmethod);
#line 179 "Javascript.vala"
		_JSStringRelease0 (jfile_data);
#line 179 "Javascript.vala"
		_g_free0 (file_data);
#line 179 "Javascript.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 179 "Javascript.vala"
		g_clear_error (&_inner_error0_);
#line 179 "Javascript.vala"
		return NULL;
#line 939 "Javascript.vala.c"
	}
#line 180 "Javascript.vala"
	_tmp39_ = g_strdup ("");
#line 180 "Javascript.vala"
	result = _tmp39_;
#line 180 "Javascript.vala"
	_0 (oval);
#line 180 "Javascript.vala"
	_0 (val);
#line 180 "Javascript.vala"
	_0 (othis);
#line 180 "Javascript.vala"
	_JSGlobalContextRelease0 (ctx);
#line 180 "Javascript.vala"
	_JSClassRelease0 (goc);
#line 180 "Javascript.vala"
	_0 (exd);
#line 180 "Javascript.vala"
	_0 (exb);
#line 180 "Javascript.vala"
	_0 (exa);
#line 180 "Javascript.vala"
	_JSStringRelease0 (jmethod);
#line 180 "Javascript.vala"
	_JSStringRelease0 (jfile_data);
#line 180 "Javascript.vala"
	_g_free0 (file_data);
#line 180 "Javascript.vala"
	return result;
#line 969 "Javascript.vala.c"
}

static void
palete_value_javascript_init (GValue* value)
{
#line 23 "Javascript.vala"
	value->data[0].v_pointer = NULL;
#line 977 "Javascript.vala.c"
}

static void
palete_value_javascript_free_value (GValue* value)
{
#line 23 "Javascript.vala"
	if (value->data[0].v_pointer) {
#line 23 "Javascript.vala"
		palete_javascript_unref (value->data[0].v_pointer);
#line 987 "Javascript.vala.c"
	}
}

static void
palete_value_javascript_copy_value (const GValue* src_value,
                                    GValue* dest_value)
{
#line 23 "Javascript.vala"
	if (src_value->data[0].v_pointer) {
#line 23 "Javascript.vala"
		dest_value->data[0].v_pointer = palete_javascript_ref (src_value->data[0].v_pointer);
#line 999 "Javascript.vala.c"
	} else {
#line 23 "Javascript.vala"
		dest_value->data[0].v_pointer = NULL;
#line 1003 "Javascript.vala.c"
	}
}

static gpointer
palete_value_javascript_peek_pointer (const GValue* value)
{
#line 23 "Javascript.vala"
	return value->data[0].v_pointer;
#line 1012 "Javascript.vala.c"
}

static gchar*
palete_value_javascript_collect_value (GValue* value,
                                       guint n_collect_values,
                                       GTypeCValue* collect_values,
                                       guint collect_flags)
{
#line 23 "Javascript.vala"
	if (collect_values[0].v_pointer) {
#line 1023 "Javascript.vala.c"
		PaleteJavascript * object;
		object = collect_values[0].v_pointer;
#line 23 "Javascript.vala"
		if (object->parent_instance.g_class == NULL) {
#line 23 "Javascript.vala"
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 1030 "Javascript.vala.c"
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
#line 23 "Javascript.vala"
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 1034 "Javascript.vala.c"
		}
#line 23 "Javascript.vala"
		value->data[0].v_pointer = palete_javascript_ref (object);
#line 1038 "Javascript.vala.c"
	} else {
#line 23 "Javascript.vala"
		value->data[0].v_pointer = NULL;
#line 1042 "Javascript.vala.c"
	}
#line 23 "Javascript.vala"
	return NULL;
#line 1046 "Javascript.vala.c"
}

static gchar*
palete_value_javascript_lcopy_value (const GValue* value,
                                     guint n_collect_values,
                                     GTypeCValue* collect_values,
                                     guint collect_flags)
{
	PaleteJavascript ** object_p;
	object_p = collect_values[0].v_pointer;
#line 23 "Javascript.vala"
	if (!object_p) {
#line 23 "Javascript.vala"
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
#line 1061 "Javascript.vala.c"
	}
#line 23 "Javascript.vala"
	if (!value->data[0].v_pointer) {
#line 23 "Javascript.vala"
		*object_p = NULL;
#line 1067 "Javascript.vala.c"
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
#line 23 "Javascript.vala"
		*object_p = value->data[0].v_pointer;
#line 1071 "Javascript.vala.c"
	} else {
#line 23 "Javascript.vala"
		*object_p = palete_javascript_ref (value->data[0].v_pointer);
#line 1075 "Javascript.vala.c"
	}
#line 23 "Javascript.vala"
	return NULL;
#line 1079 "Javascript.vala.c"
}

GParamSpec*
palete_param_spec_javascript (const gchar* name,
                              const gchar* nick,
                              const gchar* blurb,
                              GType object_type,
                              GParamFlags flags)
{
	PaleteParamSpecJavascript* spec;
#line 23 "Javascript.vala"
	g_return_val_if_fail (g_type_is_a (object_type, PALETE_TYPE_JAVASCRIPT), NULL);
#line 23 "Javascript.vala"
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
#line 23 "Javascript.vala"
	G_PARAM_SPEC (spec)->value_type = object_type;
#line 23 "Javascript.vala"
	return G_PARAM_SPEC (spec);
#line 1098 "Javascript.vala.c"
}

gpointer
palete_value_get_javascript (const GValue* value)
{
#line 23 "Javascript.vala"
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, PALETE_TYPE_JAVASCRIPT), NULL);
#line 23 "Javascript.vala"
	return value->data[0].v_pointer;
#line 1108 "Javascript.vala.c"
}

void
palete_value_set_javascript (GValue* value,
                             gpointer v_object)
{
	PaleteJavascript * old;
#line 23 "Javascript.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, PALETE_TYPE_JAVASCRIPT));
#line 23 "Javascript.vala"
	old = value->data[0].v_pointer;
#line 23 "Javascript.vala"
	if (v_object) {
#line 23 "Javascript.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, PALETE_TYPE_JAVASCRIPT));
#line 23 "Javascript.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 23 "Javascript.vala"
		value->data[0].v_pointer = v_object;
#line 23 "Javascript.vala"
		palete_javascript_ref (value->data[0].v_pointer);
#line 1130 "Javascript.vala.c"
	} else {
#line 23 "Javascript.vala"
		value->data[0].v_pointer = NULL;
#line 1134 "Javascript.vala.c"
	}
#line 23 "Javascript.vala"
	if (old) {
#line 23 "Javascript.vala"
		palete_javascript_unref (old);
#line 1140 "Javascript.vala.c"
	}
}

void
palete_value_take_javascript (GValue* value,
                              gpointer v_object)
{
	PaleteJavascript * old;
#line 23 "Javascript.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, PALETE_TYPE_JAVASCRIPT));
#line 23 "Javascript.vala"
	old = value->data[0].v_pointer;
#line 23 "Javascript.vala"
	if (v_object) {
#line 23 "Javascript.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, PALETE_TYPE_JAVASCRIPT));
#line 23 "Javascript.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 23 "Javascript.vala"
		value->data[0].v_pointer = v_object;
#line 1161 "Javascript.vala.c"
	} else {
#line 23 "Javascript.vala"
		value->data[0].v_pointer = NULL;
#line 1165 "Javascript.vala.c"
	}
#line 23 "Javascript.vala"
	if (old) {
#line 23 "Javascript.vala"
		palete_javascript_unref (old);
#line 1171 "Javascript.vala.c"
	}
}

static void
palete_javascript_class_init (PaleteJavascriptClass * klass,
                              gpointer klass_data)
{
#line 23 "Javascript.vala"
	palete_javascript_parent_class = g_type_class_peek_parent (klass);
#line 23 "Javascript.vala"
	((PaleteJavascriptClass *) klass)->finalize = palete_javascript_finalize;
#line 1183 "Javascript.vala.c"
}

static void
palete_javascript_instance_init (PaleteJavascript * self,
                                 gpointer klass)
{
#line 65 "Javascript.vala"
	self->js_global_context = NULL;
#line 23 "Javascript.vala"
	self->ref_count = 1;
#line 1194 "Javascript.vala.c"
}

static void
palete_javascript_finalize (PaleteJavascript * obj)
{
	PaleteJavascript * self;
#line 23 "Javascript.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PALETE_TYPE_JAVASCRIPT, PaleteJavascript);
#line 23 "Javascript.vala"
	g_signal_handlers_destroy (self);
#line 65 "Javascript.vala"
	_JSGlobalContextRelease0 (self->js_global_context);
#line 1207 "Javascript.vala.c"
}

static GType
palete_javascript_get_type_once (void)
{
	static const GTypeValueTable g_define_type_value_table = { palete_value_javascript_init, palete_value_javascript_free_value, palete_value_javascript_copy_value, palete_value_javascript_peek_pointer, "p", palete_value_javascript_collect_value, "p", palete_value_javascript_lcopy_value };
	static const GTypeInfo g_define_type_info = { sizeof (PaleteJavascriptClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) palete_javascript_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PaleteJavascript), 0, (GInstanceInitFunc) palete_javascript_instance_init, &g_define_type_value_table };
	static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
	GType palete_javascript_type_id;
	palete_javascript_type_id = g_type_register_fundamental (g_type_fundamental_next (), "PaleteJavascript", &g_define_type_info, &g_define_type_fundamental_info, 0);
	return palete_javascript_type_id;
}

GType
palete_javascript_get_type (void)
{
	static volatile gsize palete_javascript_type_id__once = 0;
	if (g_once_init_enter (&palete_javascript_type_id__once)) {
		GType palete_javascript_type_id;
		palete_javascript_type_id = palete_javascript_get_type_once ();
		g_once_init_leave (&palete_javascript_type_id__once, palete_javascript_type_id);
	}
	return palete_javascript_type_id__once;
}

gpointer
palete_javascript_ref (gpointer instance)
{
	PaleteJavascript * self;
	self = instance;
#line 23 "Javascript.vala"
	g_atomic_int_inc (&self->ref_count);
#line 23 "Javascript.vala"
	return instance;
#line 1242 "Javascript.vala.c"
}

void
palete_javascript_unref (gpointer instance)
{
	PaleteJavascript * self;
	self = instance;
#line 23 "Javascript.vala"
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
#line 23 "Javascript.vala"
		PALETE_JAVASCRIPT_GET_CLASS (self)->finalize (self);
#line 23 "Javascript.vala"
		g_type_free_instance ((GTypeInstance *) self);
#line 1256 "Javascript.vala.c"
	}
}

static inline gpointer
_vala_memdup2 (gconstpointer mem,
               gsize byte_size)
{
	gpointer new_mem;
	if (mem && byte_size != 0) {
		new_mem = g_malloc (byte_size);
		memcpy (new_mem, mem, byte_size);
	} else {
		new_mem = NULL;
	}
	return new_mem;
}

