/* RooDatabase.vala.c generated by valac, the Vala compiler
 * generated from RooDatabase.vala, do not modify */

/*
 * Renderer for Roo Database code
 * 
 * - Concept - this code does the SQL queries
 *   pulls data from information_schema (on mysql only at present..)
 *   Sends it down the line to the Javascript code. to generate structures 
 * 
 */
/* should this be in palete...*/

#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <libgda/libgda.h>
#include <json-glib/json-glib.h>
#include <gee.h>

#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define PALETE_TYPE_ROO_DATABASE (palete_roo_database_get_type ())
#define PALETE_ROO_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PALETE_TYPE_ROO_DATABASE, PaleteRooDatabase))
#define PALETE_ROO_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PALETE_TYPE_ROO_DATABASE, PaleteRooDatabaseClass))
#define PALETE_IS_ROO_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PALETE_TYPE_ROO_DATABASE))
#define PALETE_IS_ROO_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PALETE_TYPE_ROO_DATABASE))
#define PALETE_ROO_DATABASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PALETE_TYPE_ROO_DATABASE, PaleteRooDatabaseClass))

typedef struct _PaleteRooDatabase PaleteRooDatabase;
typedef struct _PaleteRooDatabaseClass PaleteRooDatabaseClass;
typedef struct _PaleteRooDatabasePrivate PaleteRooDatabasePrivate;

#define PROJECT_TYPE_PROJECT (project_project_get_type ())
#define PROJECT_PROJECT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PROJECT_TYPE_PROJECT, ProjectProject))
#define PROJECT_PROJECT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PROJECT_TYPE_PROJECT, ProjectProjectClass))
#define PROJECT_IS_PROJECT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PROJECT_TYPE_PROJECT))
#define PROJECT_IS_PROJECT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PROJECT_TYPE_PROJECT))
#define PROJECT_PROJECT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PROJECT_TYPE_PROJECT, ProjectProjectClass))

typedef struct _ProjectProject ProjectProject;
typedef struct _ProjectProjectClass ProjectProjectClass;

#define PROJECT_TYPE_ROO (project_roo_get_type ())
#define PROJECT_ROO(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PROJECT_TYPE_ROO, ProjectRoo))
#define PROJECT_ROO_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PROJECT_TYPE_ROO, ProjectRooClass))
#define PROJECT_IS_ROO(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PROJECT_TYPE_ROO))
#define PROJECT_IS_ROO_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PROJECT_TYPE_ROO))
#define PROJECT_ROO_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PROJECT_TYPE_ROO, ProjectRooClass))

typedef struct _ProjectRoo ProjectRoo;
typedef struct _ProjectRooClass ProjectRooClass;
enum  {
	PALETE_ROO_DATABASE_0_PROPERTY,
	PALETE_ROO_DATABASE_NUM_PROPERTIES
};
static GParamSpec* palete_roo_database_properties[PALETE_ROO_DATABASE_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _ProjectProjectPrivate ProjectProjectPrivate;

#define PALETE_TYPE_PALETE (palete_palete_get_type ())
#define PALETE_PALETE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PALETE_TYPE_PALETE, PaletePalete))
#define PALETE_PALETE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PALETE_TYPE_PALETE, PaletePaleteClass))
#define PALETE_IS_PALETE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PALETE_TYPE_PALETE))
#define PALETE_IS_PALETE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PALETE_TYPE_PALETE))
#define PALETE_PALETE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PALETE_TYPE_PALETE, PaletePaleteClass))

typedef struct _PaletePalete PaletePalete;
typedef struct _PaletePaleteClass PaletePaleteClass;

#define PALETE_TYPE_GIR_OBJECT (palete_gir_object_get_type ())
#define PALETE_GIR_OBJECT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PALETE_TYPE_GIR_OBJECT, PaleteGirObject))
#define PALETE_GIR_OBJECT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PALETE_TYPE_GIR_OBJECT, PaleteGirObjectClass))
#define PALETE_IS_GIR_OBJECT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PALETE_TYPE_GIR_OBJECT))
#define PALETE_IS_GIR_OBJECT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PALETE_TYPE_GIR_OBJECT))
#define PALETE_GIR_OBJECT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PALETE_TYPE_GIR_OBJECT, PaleteGirObjectClass))

typedef struct _PaleteGirObject PaleteGirObject;
typedef struct _PaleteGirObjectClass PaleteGirObjectClass;

#define PALETE_TYPE_GIR (palete_gir_get_type ())
#define PALETE_GIR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PALETE_TYPE_GIR, PaleteGir))
#define PALETE_GIR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PALETE_TYPE_GIR, PaleteGirClass))
#define PALETE_IS_GIR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PALETE_TYPE_GIR))
#define PALETE_IS_GIR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PALETE_TYPE_GIR))
#define PALETE_GIR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PALETE_TYPE_GIR, PaleteGirClass))

typedef struct _PaleteGir PaleteGir;
typedef struct _PaleteGirClass PaleteGirClass;
typedef struct _ProjectRooPrivate ProjectRooPrivate;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _json_array_unref0(var) ((var == NULL) ? NULL : (var = (json_array_unref (var), NULL)))
#define _json_object_unref0(var) ((var == NULL) ? NULL : (var = (json_object_unref (var), NULL)))
#define _g_match_info_unref0(var) ((var == NULL) ? NULL : (var = (g_match_info_unref (var), NULL)))
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define __vala_GValue_free0(var) ((var == NULL) ? NULL : (var = (_vala_GValue_free (var), NULL)))

struct _PaleteRooDatabase {
	GObject parent_instance;
	PaleteRooDatabasePrivate * priv;
	ProjectRoo* project;
	gchar* DBTYPE;
	gchar* DBNAME;
	GdaConnection* cnc;
};

struct _PaleteRooDatabaseClass {
	GObjectClass parent_class;
};

struct _ProjectProject {
	GObject parent_instance;
	ProjectProjectPrivate * priv;
	gchar* path;
	gchar* xtype;
	PaletePalete* palete;
	GeeHashMap* gir_cache;
};

struct _ProjectProjectClass {
	GObjectClass parent_class;
	void (*loadJson) (ProjectProject* self, JsonObject* obj);
	void (*saveJson) (ProjectProject* self, JsonObject* obj);
	void (*initDatabase) (ProjectProject* self);
	void (*initialize) (ProjectProject* self);
};

struct _ProjectRoo {
	ProjectProject parent_instance;
	ProjectRooPrivate * priv;
	PaleteRooDatabase* roo_database;
	gchar* runhtml;
	gchar* base_template;
	gchar* rootURL;
	gchar* html_gen;
	gchar* DBTYPE;
	gchar* DBNAME;
	gchar* DBUSERNAME;
	gchar* DBPASSWORD;
};

struct _ProjectRooClass {
	ProjectProjectClass parent_class;
};

static gpointer palete_roo_database_parent_class = NULL;

VALA_EXTERN GType palete_roo_database_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (PaleteRooDatabase, g_object_unref)
VALA_EXTERN GType project_project_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ProjectProject, g_object_unref)
VALA_EXTERN GType project_roo_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (ProjectRoo, g_object_unref)
VALA_EXTERN PaleteRooDatabase* palete_roo_database_new_from_project (ProjectRoo* project);
VALA_EXTERN PaleteRooDatabase* palete_roo_database_construct_from_project (GType object_type,
                                                               ProjectRoo* project);
VALA_EXTERN GType palete_palete_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (PaletePalete, g_object_unref)
VALA_EXTERN GType palete_gir_object_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (PaleteGirObject, g_object_unref)
VALA_EXTERN GType palete_gir_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (PaleteGir, g_object_unref)
VALA_EXTERN PaleteRooDatabase* palete_roo_database_new_from_cfg (const gchar* dbtype,
                                                     const gchar* dbname,
                                                     const gchar* dbuser,
                                                     const gchar* dbpass);
VALA_EXTERN PaleteRooDatabase* palete_roo_database_construct_from_cfg (GType object_type,
                                                           const gchar* dbtype,
                                                           const gchar* dbname,
                                                           const gchar* dbuser,
                                                           const gchar* dbpass);
VALA_EXTERN JsonArray* palete_roo_database_readTables (PaleteRooDatabase* self);
VALA_EXTERN JsonArray* palete_roo_database_fetchAll (PaleteRooDatabase* self,
                                         GdaDataModel* qnr);
VALA_EXTERN GeeArrayList* palete_roo_database_readTablesGee (PaleteRooDatabase* self);
VALA_EXTERN JsonObject* palete_roo_database_readTable (PaleteRooDatabase* self,
                                           const gchar* tablename);
VALA_EXTERN JsonObject* palete_roo_database_readForeignKeys (PaleteRooDatabase* self,
                                                 const gchar* table);
static GValue* _g_value_dup (GValue* self);
static void _vala_GValue_free (GValue* self);
VALA_EXTERN PaleteRooDatabase* palete_roo_database_new (void);
VALA_EXTERN PaleteRooDatabase* palete_roo_database_construct (GType object_type);
static void palete_roo_database_finalize (GObject * obj);
static GType palete_roo_database_get_type_once (void);
static void _vala_array_destroy (gpointer array,
                          gssize array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gssize array_length,
                       GDestroyNotify destroy_func);
static gssize _vala_array_length (gpointer array);
static inline gpointer _vala_memdup2 (gconstpointer mem,
                        gsize byte_size);

static GRegex* _tmp_regex_0 = NULL;

static gpointer
_g_object_ref0 (gpointer self)
{
#line 25 "RooDatabase.vala"
	return self ? g_object_ref (self) : NULL;
#line 214 "RooDatabase.vala.c"
}

PaleteRooDatabase*
palete_roo_database_construct_from_project (GType object_type,
                                            ProjectRoo* project)
{
	PaleteRooDatabase * self = NULL;
	ProjectRoo* _tmp0_;
	ProjectRoo* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	ProjectRoo* _tmp4_;
	const gchar* _tmp5_;
	gchar* _tmp6_;
	const gchar* _tmp7_;
	gint _tmp8_;
	gint _tmp9_;
	GError* _inner_error0_ = NULL;
#line 23 "RooDatabase.vala"
	self = (PaleteRooDatabase*) g_object_new (object_type, NULL);
#line 25 "RooDatabase.vala"
	_tmp0_ = _g_object_ref0 (project);
#line 25 "RooDatabase.vala"
	_g_object_unref0 (self->project);
#line 25 "RooDatabase.vala"
	self->project = _tmp0_;
#line 26 "RooDatabase.vala"
	_tmp1_ = self->project;
#line 26 "RooDatabase.vala"
	_tmp2_ = _tmp1_->DBTYPE;
#line 26 "RooDatabase.vala"
	_tmp3_ = g_strdup (_tmp2_);
#line 26 "RooDatabase.vala"
	_g_free0 (self->DBTYPE);
#line 26 "RooDatabase.vala"
	self->DBTYPE = _tmp3_;
#line 27 "RooDatabase.vala"
	_tmp4_ = self->project;
#line 27 "RooDatabase.vala"
	_tmp5_ = _tmp4_->DBNAME;
#line 27 "RooDatabase.vala"
	_tmp6_ = g_strdup (_tmp5_);
#line 27 "RooDatabase.vala"
	_g_free0 (self->DBNAME);
#line 27 "RooDatabase.vala"
	self->DBNAME = _tmp6_;
#line 28 "RooDatabase.vala"
	_tmp7_ = self->DBTYPE;
#line 28 "RooDatabase.vala"
	_tmp8_ = strlen (_tmp7_);
#line 28 "RooDatabase.vala"
	_tmp9_ = _tmp8_;
#line 28 "RooDatabase.vala"
	if (_tmp9_ < 1) {
#line 29 "RooDatabase.vala"
		return self;
#line 271 "RooDatabase.vala.c"
	}
	{
		GdaConnection* _tmp10_ = NULL;
		const gchar* _tmp11_;
		const gchar* _tmp12_;
		gchar* _tmp13_;
		gchar* _tmp14_;
		ProjectRoo* _tmp15_;
		const gchar* _tmp16_;
		gchar* _tmp17_;
		gchar* _tmp18_;
		gchar* _tmp19_;
		gchar* _tmp20_;
		ProjectRoo* _tmp21_;
		const gchar* _tmp22_;
		gchar* _tmp23_;
		gchar* _tmp24_;
		GdaConnection* _tmp25_;
		GdaConnection* _tmp26_;
		GdaConnection* _tmp27_;
#line 35 "RooDatabase.vala"
		_tmp11_ = self->DBTYPE;
#line 35 "RooDatabase.vala"
		_tmp12_ = self->DBNAME;
#line 35 "RooDatabase.vala"
		_tmp13_ = g_strconcat ("DB_NAME=", _tmp12_, NULL);
#line 35 "RooDatabase.vala"
		_tmp14_ = _tmp13_;
#line 35 "RooDatabase.vala"
		_tmp15_ = self->project;
#line 35 "RooDatabase.vala"
		_tmp16_ = _tmp15_->DBUSERNAME;
#line 35 "RooDatabase.vala"
		_tmp17_ = g_strconcat ("USERNAME=", _tmp16_, NULL);
#line 35 "RooDatabase.vala"
		_tmp18_ = _tmp17_;
#line 35 "RooDatabase.vala"
		_tmp19_ = g_strconcat (_tmp18_, ";PASSWORD=", NULL);
#line 35 "RooDatabase.vala"
		_tmp20_ = _tmp19_;
#line 35 "RooDatabase.vala"
		_tmp21_ = self->project;
#line 35 "RooDatabase.vala"
		_tmp22_ = _tmp21_->DBPASSWORD;
#line 35 "RooDatabase.vala"
		_tmp23_ = g_strconcat (_tmp20_, _tmp22_, NULL);
#line 35 "RooDatabase.vala"
		_tmp24_ = _tmp23_;
#line 35 "RooDatabase.vala"
		_tmp25_ = gda_connection_open_from_string (_tmp11_, _tmp14_, _tmp24_, GDA_CONNECTION_OPTIONS_NONE, &_inner_error0_);
#line 35 "RooDatabase.vala"
		_tmp26_ = _tmp25_;
#line 35 "RooDatabase.vala"
		_g_free0 (_tmp24_);
#line 35 "RooDatabase.vala"
		_g_free0 (_tmp20_);
#line 35 "RooDatabase.vala"
		_g_free0 (_tmp18_);
#line 35 "RooDatabase.vala"
		_g_free0 (_tmp14_);
#line 35 "RooDatabase.vala"
		_tmp10_ = _tmp26_;
#line 35 "RooDatabase.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 336 "RooDatabase.vala.c"
			goto __catch0_g_error;
		}
#line 35 "RooDatabase.vala"
		_tmp27_ = _tmp10_;
#line 35 "RooDatabase.vala"
		_tmp10_ = NULL;
#line 35 "RooDatabase.vala"
		_g_object_unref0 (self->cnc);
#line 35 "RooDatabase.vala"
		self->cnc = _tmp27_;
#line 33 "RooDatabase.vala"
		_g_object_unref0 (_tmp10_);
#line 349 "RooDatabase.vala.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp28_;
		const gchar* _tmp29_;
		gchar* _tmp30_;
#line 33 "RooDatabase.vala"
		e = _inner_error0_;
#line 33 "RooDatabase.vala"
		_inner_error0_ = NULL;
#line 43 "RooDatabase.vala"
		_tmp28_ = e;
#line 43 "RooDatabase.vala"
		_tmp29_ = _tmp28_->message;
#line 43 "RooDatabase.vala"
		g_warning ("RooDatabase.vala:43: %s\n", _tmp29_);
#line 44 "RooDatabase.vala"
		_g_object_unref0 (self->cnc);
#line 44 "RooDatabase.vala"
		self->cnc = NULL;
#line 45 "RooDatabase.vala"
		_tmp30_ = g_strdup ("");
#line 45 "RooDatabase.vala"
		_g_free0 (self->DBTYPE);
#line 45 "RooDatabase.vala"
		self->DBTYPE = _tmp30_;
#line 33 "RooDatabase.vala"
		_g_error_free0 (e);
#line 380 "RooDatabase.vala.c"
	}
	__finally0:
#line 33 "RooDatabase.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 33 "RooDatabase.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 33 "RooDatabase.vala"
		g_clear_error (&_inner_error0_);
#line 33 "RooDatabase.vala"
		return NULL;
#line 391 "RooDatabase.vala.c"
	}
#line 23 "RooDatabase.vala"
	return self;
#line 395 "RooDatabase.vala.c"
}

PaleteRooDatabase*
palete_roo_database_new_from_project (ProjectRoo* project)
{
#line 23 "RooDatabase.vala"
	return palete_roo_database_construct_from_project (PALETE_TYPE_ROO_DATABASE, project);
#line 403 "RooDatabase.vala.c"
}

PaleteRooDatabase*
palete_roo_database_construct_from_cfg (GType object_type,
                                        const gchar* dbtype,
                                        const gchar* dbname,
                                        const gchar* dbuser,
                                        const gchar* dbpass)
{
	PaleteRooDatabase * self = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
	GError* _inner_error0_ = NULL;
#line 50 "RooDatabase.vala"
	self = (PaleteRooDatabase*) g_object_new (object_type, NULL);
#line 52 "RooDatabase.vala"
	_tmp0_ = g_strdup (dbtype);
#line 52 "RooDatabase.vala"
	_g_free0 (self->DBTYPE);
#line 52 "RooDatabase.vala"
	self->DBTYPE = _tmp0_;
#line 53 "RooDatabase.vala"
	_tmp1_ = g_strdup (dbname);
#line 53 "RooDatabase.vala"
	_g_free0 (self->DBNAME);
#line 53 "RooDatabase.vala"
	self->DBNAME = _tmp1_;
#line 431 "RooDatabase.vala.c"
	{
		GdaConnection* _tmp2_ = NULL;
		const gchar* _tmp3_;
		gchar* _tmp4_;
		gchar* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
		gchar* _tmp8_;
		gchar* _tmp9_;
		gchar* _tmp10_;
		gchar* _tmp11_;
		GdaConnection* _tmp12_;
		GdaConnection* _tmp13_;
		GdaConnection* _tmp14_;
#line 55 "RooDatabase.vala"
		_tmp3_ = self->DBTYPE;
#line 55 "RooDatabase.vala"
		_tmp4_ = g_strconcat ("DB_NAME=", dbname, NULL);
#line 55 "RooDatabase.vala"
		_tmp5_ = _tmp4_;
#line 55 "RooDatabase.vala"
		_tmp6_ = g_strconcat ("USERNAME=", dbuser, NULL);
#line 55 "RooDatabase.vala"
		_tmp7_ = _tmp6_;
#line 55 "RooDatabase.vala"
		_tmp8_ = g_strconcat (_tmp7_, ";PASSWORD=", NULL);
#line 55 "RooDatabase.vala"
		_tmp9_ = _tmp8_;
#line 55 "RooDatabase.vala"
		_tmp10_ = g_strconcat (_tmp9_, dbpass, NULL);
#line 55 "RooDatabase.vala"
		_tmp11_ = _tmp10_;
#line 55 "RooDatabase.vala"
		_tmp12_ = gda_connection_open_from_string (_tmp3_, _tmp5_, _tmp11_, GDA_CONNECTION_OPTIONS_NONE, &_inner_error0_);
#line 55 "RooDatabase.vala"
		_tmp13_ = _tmp12_;
#line 55 "RooDatabase.vala"
		_g_free0 (_tmp11_);
#line 55 "RooDatabase.vala"
		_g_free0 (_tmp9_);
#line 55 "RooDatabase.vala"
		_g_free0 (_tmp7_);
#line 55 "RooDatabase.vala"
		_g_free0 (_tmp5_);
#line 55 "RooDatabase.vala"
		_tmp2_ = _tmp13_;
#line 55 "RooDatabase.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 480 "RooDatabase.vala.c"
			goto __catch0_g_error;
		}
#line 55 "RooDatabase.vala"
		_tmp14_ = _tmp2_;
#line 55 "RooDatabase.vala"
		_tmp2_ = NULL;
#line 55 "RooDatabase.vala"
		_g_object_unref0 (self->cnc);
#line 55 "RooDatabase.vala"
		self->cnc = _tmp14_;
#line 54 "RooDatabase.vala"
		_g_object_unref0 (_tmp2_);
#line 493 "RooDatabase.vala.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		gchar* _tmp15_;
#line 54 "RooDatabase.vala"
		g_clear_error (&_inner_error0_);
#line 63 "RooDatabase.vala"
		_g_object_unref0 (self->cnc);
#line 63 "RooDatabase.vala"
		self->cnc = NULL;
#line 64 "RooDatabase.vala"
		_tmp15_ = g_strdup ("");
#line 64 "RooDatabase.vala"
		_g_free0 (self->DBTYPE);
#line 64 "RooDatabase.vala"
		self->DBTYPE = _tmp15_;
#line 511 "RooDatabase.vala.c"
	}
	__finally0:
#line 54 "RooDatabase.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 54 "RooDatabase.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 54 "RooDatabase.vala"
		g_clear_error (&_inner_error0_);
#line 54 "RooDatabase.vala"
		return NULL;
#line 522 "RooDatabase.vala.c"
	}
#line 50 "RooDatabase.vala"
	return self;
#line 526 "RooDatabase.vala.c"
}

PaleteRooDatabase*
palete_roo_database_new_from_cfg (const gchar* dbtype,
                                  const gchar* dbname,
                                  const gchar* dbuser,
                                  const gchar* dbpass)
{
#line 50 "RooDatabase.vala"
	return palete_roo_database_construct_from_cfg (PALETE_TYPE_ROO_DATABASE, dbtype, dbname, dbuser, dbpass);
#line 537 "RooDatabase.vala.c"
}

JsonArray*
palete_roo_database_readTables (PaleteRooDatabase* self)
{
	const gchar* _tmp10_;
	JsonArray* _tmp11_;
	GError* _inner_error0_ = NULL;
	JsonArray* result;
	{
		const gchar* _tmp0_;
		const gchar* _tmp5_;
#line 73 "RooDatabase.vala"
		_tmp0_ = self->DBTYPE;
#line 73 "RooDatabase.vala"
		if (g_strcmp0 (_tmp0_, "PostgreSQL") == 0) {
#line 554 "RooDatabase.vala.c"
			GdaDataModel* _tmp1_ = NULL;
			GdaConnection* _tmp2_;
			GdaDataModel* _tmp3_;
			JsonArray* _tmp4_;
#line 75 "RooDatabase.vala"
			_tmp2_ = self->cnc;
#line 75 "RooDatabase.vala"
			_tmp3_ = gda_connection_execute_select_command (_tmp2_, "select c.relname FROM pg_catalog.pg_class c \n" \
"\t\t\t\t\t\t\tLEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relname" \
"space \n" \
"\t\t\t\t\t\t\tWHERE c.relkind IN ('r','') AND n.nspname NOT IN ('pg_ca" \
"talog', 'pg_toast')\n" \
"\t\t\t\t\t\t\tAND pg_catalog.pg_table_is_visible(c.oid) \n" \
"\t\t\t\t\t\t", &_inner_error0_);
#line 75 "RooDatabase.vala"
			_tmp1_ = _tmp3_;
#line 75 "RooDatabase.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 567 "RooDatabase.vala.c"
				goto __catch0_g_error;
			}
#line 75 "RooDatabase.vala"
			_tmp4_ = palete_roo_database_fetchAll (self, _tmp1_);
#line 75 "RooDatabase.vala"
			result = _tmp4_;
#line 75 "RooDatabase.vala"
			_g_object_unref0 (_tmp1_);
#line 75 "RooDatabase.vala"
			return result;
#line 578 "RooDatabase.vala.c"
		}
#line 83 "RooDatabase.vala"
		_tmp5_ = self->DBTYPE;
#line 83 "RooDatabase.vala"
		if (g_strcmp0 (_tmp5_, "MySQL") == 0) {
#line 584 "RooDatabase.vala.c"
			GdaDataModel* _tmp6_ = NULL;
			GdaConnection* _tmp7_;
			GdaDataModel* _tmp8_;
			JsonArray* _tmp9_;
#line 84 "RooDatabase.vala"
			_tmp7_ = self->cnc;
#line 84 "RooDatabase.vala"
			_tmp8_ = gda_connection_execute_select_command (_tmp7_, "SHOW TABLES", &_inner_error0_);
#line 84 "RooDatabase.vala"
			_tmp6_ = _tmp8_;
#line 84 "RooDatabase.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 597 "RooDatabase.vala.c"
				goto __catch0_g_error;
			}
#line 84 "RooDatabase.vala"
			_tmp9_ = palete_roo_database_fetchAll (self, _tmp6_);
#line 84 "RooDatabase.vala"
			result = _tmp9_;
#line 84 "RooDatabase.vala"
			_g_object_unref0 (_tmp6_);
#line 84 "RooDatabase.vala"
			return result;
#line 608 "RooDatabase.vala.c"
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 72 "RooDatabase.vala"
		g_clear_error (&_inner_error0_);
#line 616 "RooDatabase.vala.c"
	}
	__finally0:
#line 72 "RooDatabase.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 72 "RooDatabase.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 72 "RooDatabase.vala"
		g_clear_error (&_inner_error0_);
#line 72 "RooDatabase.vala"
		return NULL;
#line 627 "RooDatabase.vala.c"
	}
#line 88 "RooDatabase.vala"
	_tmp10_ = self->DBTYPE;
#line 88 "RooDatabase.vala"
	g_warning ("RooDatabase.vala:88: Read tables failed DBTYPE = %s\n", _tmp10_);
#line 89 "RooDatabase.vala"
	_tmp11_ = json_array_new ();
#line 89 "RooDatabase.vala"
	result = _tmp11_;
#line 89 "RooDatabase.vala"
	return result;
#line 639 "RooDatabase.vala.c"
}

GeeArrayList*
palete_roo_database_readTablesGee (PaleteRooDatabase* self)
{
	GeeArrayList* ret = NULL;
	GeeArrayList* _tmp0_;
	JsonArray* ar = NULL;
	JsonArray* _tmp1_;
	GeeArrayList* result;
#line 94 "RooDatabase.vala"
	_tmp0_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL);
#line 94 "RooDatabase.vala"
	ret = _tmp0_;
#line 95 "RooDatabase.vala"
	_tmp1_ = palete_roo_database_readTables (self);
#line 95 "RooDatabase.vala"
	ar = _tmp1_;
#line 658 "RooDatabase.vala.c"
	{
		gint i = 0;
#line 96 "RooDatabase.vala"
		i = 0;
#line 663 "RooDatabase.vala.c"
		{
			gboolean _tmp2_ = FALSE;
#line 96 "RooDatabase.vala"
			_tmp2_ = TRUE;
#line 96 "RooDatabase.vala"
			while (TRUE) {
#line 670 "RooDatabase.vala.c"
				JsonArray* _tmp4_;
				GeeArrayList* _tmp5_;
				JsonArray* _tmp6_;
				const gchar* _tmp7_;
#line 96 "RooDatabase.vala"
				if (!_tmp2_) {
#line 677 "RooDatabase.vala.c"
					gint _tmp3_;
#line 96 "RooDatabase.vala"
					_tmp3_ = i;
#line 96 "RooDatabase.vala"
					i = _tmp3_ + 1;
#line 683 "RooDatabase.vala.c"
				}
#line 96 "RooDatabase.vala"
				_tmp2_ = FALSE;
#line 96 "RooDatabase.vala"
				_tmp4_ = ar;
#line 96 "RooDatabase.vala"
				if (!(((guint) i) < json_array_get_length (_tmp4_))) {
#line 96 "RooDatabase.vala"
					break;
#line 693 "RooDatabase.vala.c"
				}
#line 97 "RooDatabase.vala"
				_tmp5_ = ret;
#line 97 "RooDatabase.vala"
				_tmp6_ = ar;
#line 97 "RooDatabase.vala"
				_tmp7_ = json_array_get_string_element (_tmp6_, (guint) i);
#line 97 "RooDatabase.vala"
				gee_abstract_collection_add ((GeeAbstractCollection*) _tmp5_, _tmp7_);
#line 703 "RooDatabase.vala.c"
			}
		}
	}
#line 99 "RooDatabase.vala"
	result = ret;
#line 99 "RooDatabase.vala"
	_json_array_unref0 (ar);
#line 99 "RooDatabase.vala"
	return result;
#line 713 "RooDatabase.vala.c"
}

static gpointer
_json_object_ref0 (gpointer self)
{
#line 153 "RooDatabase.vala"
	return self ? json_object_ref (self) : NULL;
#line 721 "RooDatabase.vala.c"
}

JsonObject*
palete_roo_database_readTable (PaleteRooDatabase* self,
                               const gchar* tablename)
{
	JsonArray* res_ar = NULL;
	JsonArray* _tmp0_;
	JsonObject* res = NULL;
	JsonObject* _tmp1_;
	GError* _inner_error0_ = NULL;
	JsonObject* result;
#line 106 "RooDatabase.vala"
	_tmp0_ = json_array_new ();
#line 106 "RooDatabase.vala"
	res_ar = _tmp0_;
#line 107 "RooDatabase.vala"
	_tmp1_ = json_object_new ();
#line 107 "RooDatabase.vala"
	res = _tmp1_;
#line 742 "RooDatabase.vala.c"
	{
		const gchar* _tmp2_;
		const gchar* _tmp3_;
		GQuark _tmp5_ = 0U;
#line 109 "RooDatabase.vala"
		static GQuark _tmp4_label0 = 0;
#line 109 "RooDatabase.vala"
		static GQuark _tmp4_label1 = 0;
#line 109 "RooDatabase.vala"
		_tmp2_ = self->DBTYPE;
#line 109 "RooDatabase.vala"
		_tmp3_ = _tmp2_;
#line 109 "RooDatabase.vala"
		_tmp5_ = (NULL == _tmp3_) ? 0 : g_quark_from_string (_tmp3_);
#line 109 "RooDatabase.vala"
		if (_tmp5_ == ((0 != _tmp4_label0) ? _tmp4_label0 : (_tmp4_label0 = g_quark_from_static_string ("PostgreSQL")))) {
#line 109 "RooDatabase.vala"
			switch (0) {
#line 761 "RooDatabase.vala.c"
				default:
				{
					GdaDataModel* _tmp6_ = NULL;
					GdaConnection* _tmp7_;
					gchar* _tmp8_;
					gchar* _tmp9_;
					gchar* _tmp10_;
					gchar* _tmp11_;
					GdaDataModel* _tmp12_;
					GdaDataModel* _tmp13_;
					JsonArray* _tmp14_;
#line 112 "RooDatabase.vala"
					_tmp7_ = self->cnc;
#line 112 "RooDatabase.vala"
					_tmp8_ = g_strconcat ("\n" \
"\t\t\t\t\t\n" \
"\t\t\t\t\t\t SELECT \n" \
"\t\t\t\t\t\t\tf.attnum AS number, \n" \
"\t\t\t\t\t\t\tf.attname AS Field, \n" \
"\t\t\t\t\t\t\tf.attnum, \n" \
"\t\t\t\t\t\t\tCASE WHEN f.attnotnull = 't' THEN 'NO' ELSE 'YES' END AS" \
" isNull,  \n" \
"\t\t\t\t\t\t\tpg_catalog.format_type(f.atttypid,f.atttypmod) AS Type, " \
"\n" \
"\t\t\t\t\t\t\tCASE WHEN p.contype = 'p' THEN 't' ELSE 'f' END AS prima" \
"rykey, \n" \
"\t\t\t\t\t\t\tCASE WHEN p.contype = 'u' THEN 't' ELSE 'f' END AS uniqu" \
"ekey, \n" \
"\t\t\t\t\t\t\tCASE WHEN p.contype = 'f' THEN g.relname END AS foreignk" \
"ey, \n" \
"\t\t\t\t\t\t\tCASE WHEN p.contype = 'f' THEN p.confkey END AS foreignk" \
"ey_fieldnum, \n" \
"\t\t\t\t\t\t\tCASE WHEN p.contype = 'f' THEN g.relname END AS foreignk" \
"ey, \n" \
"\t\t\t\t\t\t\tCASE WHEN p.contype = 'f' THEN p.conkey END AS foreignke" \
"y_connnum, \n" \
"\t\t\t\t\t\t\tCASE WHEN f.atthasdef = 't' THEN d.adsrc END AS default " \
"\n" \
"\t\t\t\t\t\t\tFROM pg_attribute f JOIN pg_class c ON c.oid = f.attreli" \
"d \n" \
"\t\t\t\t\t\t\t\t\tJOIN pg_type t ON t.oid = f.atttypid \n" \
"\t\t\t\t\t\t\t\t\tLEFT JOIN pg_attrdef d ON d.adrelid = c.oid AND d.ad" \
"num = f.attnum \n" \
"\t\t\t\t\t\t\t\t\tLEFT JOIN pg_namespace n ON n.oid = c.relnamespace \n" \
"\t\t\t\t\t\t\t\t\tLEFT JOIN pg_constraint p ON p.conrelid = c.oid AND " \
"f.attnum = ANY ( p.conkey ) \n" \
"\t\t\t\t\t\t\t\t\tLEFT JOIN pg_class AS g ON p.confrelid = g.oid \n" \
"\t\t\t\t\t\t\tWHERE c.relkind = 'r'::char AND n.nspname = 'public' \n" \
"\t\t\t\t\t\t\tAND c.relname = '", tablename, NULL);
#line 112 "RooDatabase.vala"
					_tmp9_ = _tmp8_;
#line 112 "RooDatabase.vala"
					_tmp10_ = g_strconcat (_tmp9_, "' AND f.attnum > 0 ORDER BY number;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t", NULL);
#line 112 "RooDatabase.vala"
					_tmp11_ = _tmp10_;
#line 112 "RooDatabase.vala"
					_tmp12_ = gda_connection_execute_select_command (_tmp7_, _tmp11_, &_inner_error0_);
#line 112 "RooDatabase.vala"
					_tmp13_ = _tmp12_;
#line 112 "RooDatabase.vala"
					_g_free0 (_tmp11_);
#line 112 "RooDatabase.vala"
					_g_free0 (_tmp9_);
#line 112 "RooDatabase.vala"
					_tmp6_ = _tmp13_;
#line 112 "RooDatabase.vala"
					if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 795 "RooDatabase.vala.c"
						goto __catch0_g_error;
					}
#line 112 "RooDatabase.vala"
					_tmp14_ = palete_roo_database_fetchAll (self, _tmp6_);
#line 112 "RooDatabase.vala"
					_json_array_unref0 (res_ar);
#line 112 "RooDatabase.vala"
					res_ar = _tmp14_;
#line 138 "RooDatabase.vala"
					_g_object_unref0 (_tmp6_);
#line 138 "RooDatabase.vala"
					break;
#line 808 "RooDatabase.vala.c"
				}
			}
		} else if (_tmp5_ == ((0 != _tmp4_label1) ? _tmp4_label1 : (_tmp4_label1 = g_quark_from_static_string ("MySQL")))) {
#line 109 "RooDatabase.vala"
			switch (0) {
#line 814 "RooDatabase.vala.c"
				default:
				{
					GdaDataModel* _tmp15_ = NULL;
					GdaConnection* _tmp16_;
					gchar* _tmp17_;
					gchar* _tmp18_;
					GdaDataModel* _tmp19_;
					GdaDataModel* _tmp20_;
					JsonArray* _tmp21_;
#line 141 "RooDatabase.vala"
					_tmp16_ = self->cnc;
#line 141 "RooDatabase.vala"
					_tmp17_ = g_strconcat ("DESCRIBE ", tablename, NULL);
#line 141 "RooDatabase.vala"
					_tmp18_ = _tmp17_;
#line 141 "RooDatabase.vala"
					_tmp19_ = gda_connection_execute_select_command (_tmp16_, _tmp18_, &_inner_error0_);
#line 141 "RooDatabase.vala"
					_tmp20_ = _tmp19_;
#line 141 "RooDatabase.vala"
					_g_free0 (_tmp18_);
#line 141 "RooDatabase.vala"
					_tmp15_ = _tmp20_;
#line 141 "RooDatabase.vala"
					if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 840 "RooDatabase.vala.c"
						goto __catch0_g_error;
					}
#line 141 "RooDatabase.vala"
					_tmp21_ = palete_roo_database_fetchAll (self, _tmp15_);
#line 141 "RooDatabase.vala"
					_json_array_unref0 (res_ar);
#line 141 "RooDatabase.vala"
					res_ar = _tmp21_;
#line 142 "RooDatabase.vala"
					_g_object_unref0 (_tmp15_);
#line 142 "RooDatabase.vala"
					break;
#line 853 "RooDatabase.vala.c"
				}
			}
		} else {
#line 109 "RooDatabase.vala"
			switch (0) {
#line 859 "RooDatabase.vala.c"
				default:
				{
#line 145 "RooDatabase.vala"
					result = res;
#line 145 "RooDatabase.vala"
					_json_array_unref0 (res_ar);
#line 145 "RooDatabase.vala"
					return result;
#line 868 "RooDatabase.vala.c"
				}
			}
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 108 "RooDatabase.vala"
		g_clear_error (&_inner_error0_);
#line 149 "RooDatabase.vala"
		result = res;
#line 149 "RooDatabase.vala"
		_json_array_unref0 (res_ar);
#line 149 "RooDatabase.vala"
		return result;
#line 884 "RooDatabase.vala.c"
	}
	__finally0:
#line 108 "RooDatabase.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 108 "RooDatabase.vala"
		_json_object_unref0 (res);
#line 108 "RooDatabase.vala"
		_json_array_unref0 (res_ar);
#line 108 "RooDatabase.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 108 "RooDatabase.vala"
		g_clear_error (&_inner_error0_);
#line 108 "RooDatabase.vala"
		return NULL;
#line 899 "RooDatabase.vala.c"
	}
	{
		gint i = 0;
#line 152 "RooDatabase.vala"
		i = 0;
#line 905 "RooDatabase.vala.c"
		{
			gboolean _tmp22_ = FALSE;
#line 152 "RooDatabase.vala"
			_tmp22_ = TRUE;
#line 152 "RooDatabase.vala"
			while (TRUE) {
#line 912 "RooDatabase.vala.c"
				JsonArray* _tmp24_;
				JsonObject* el = NULL;
				JsonArray* _tmp25_;
				JsonObject* _tmp26_;
				JsonObject* _tmp27_;
				JsonObject* _tmp28_;
				JsonObject* _tmp29_;
				const gchar* _tmp30_;
				JsonObject* _tmp31_;
				JsonObject* _tmp32_;
#line 152 "RooDatabase.vala"
				if (!_tmp22_) {
#line 925 "RooDatabase.vala.c"
					gint _tmp23_;
#line 152 "RooDatabase.vala"
					_tmp23_ = i;
#line 152 "RooDatabase.vala"
					i = _tmp23_ + 1;
#line 931 "RooDatabase.vala.c"
				}
#line 152 "RooDatabase.vala"
				_tmp22_ = FALSE;
#line 152 "RooDatabase.vala"
				_tmp24_ = res_ar;
#line 152 "RooDatabase.vala"
				if (!(((guint) i) < json_array_get_length (_tmp24_))) {
#line 152 "RooDatabase.vala"
					break;
#line 941 "RooDatabase.vala.c"
				}
#line 153 "RooDatabase.vala"
				_tmp25_ = res_ar;
#line 153 "RooDatabase.vala"
				_tmp26_ = json_array_get_object_element (_tmp25_, (guint) i);
#line 153 "RooDatabase.vala"
				_tmp27_ = _json_object_ref0 (_tmp26_);
#line 153 "RooDatabase.vala"
				el = _tmp27_;
#line 154 "RooDatabase.vala"
				_tmp28_ = res;
#line 154 "RooDatabase.vala"
				_tmp29_ = el;
#line 154 "RooDatabase.vala"
				_tmp30_ = json_object_get_string_member (_tmp29_, "Field");
#line 154 "RooDatabase.vala"
				_tmp31_ = el;
#line 154 "RooDatabase.vala"
				_tmp32_ = _json_object_ref0 (_tmp31_);
#line 154 "RooDatabase.vala"
				json_object_set_object_member (_tmp28_, _tmp30_, _tmp32_);
#line 152 "RooDatabase.vala"
				_json_object_unref0 (el);
#line 965 "RooDatabase.vala.c"
			}
		}
	}
#line 156 "RooDatabase.vala"
	result = res;
#line 156 "RooDatabase.vala"
	_json_array_unref0 (res_ar);
#line 156 "RooDatabase.vala"
	return result;
#line 975 "RooDatabase.vala.c"
}

static inline GRegex*
_thread_safe_regex_init (GRegex** re,
                         const gchar * pattern,
                         GRegexCompileFlags compile_flags)
{
#line 203 "RooDatabase.vala"
	if (g_once_init_enter ((volatile gsize*) re)) {
#line 203 "RooDatabase.vala"
		GRegex* val = g_regex_new (pattern, compile_flags, 0, NULL);
#line 203 "RooDatabase.vala"
		g_once_init_leave ((volatile gsize*) re, (gsize) val);
#line 989 "RooDatabase.vala.c"
	}
#line 203 "RooDatabase.vala"
	return *re;
#line 993 "RooDatabase.vala.c"
}

static gpointer
_g_regex_ref0 (gpointer self)
{
#line 203 "RooDatabase.vala"
	return self ? g_regex_ref (self) : NULL;
#line 1001 "RooDatabase.vala.c"
}

static gchar*
string_strip (const gchar* self)
{
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	gchar* result;
#line 1368 "glib-2.0.vapi"
	_tmp0_ = g_strdup (self);
#line 1368 "glib-2.0.vapi"
	_result_ = _tmp0_;
#line 1369 "glib-2.0.vapi"
	g_strstrip (_result_);
#line 1370 "glib-2.0.vapi"
	result = _result_;
#line 1370 "glib-2.0.vapi"
	return result;
#line 1020 "RooDatabase.vala.c"
}

JsonObject*
palete_roo_database_readForeignKeys (PaleteRooDatabase* self,
                                     const gchar* table)
{
	JsonObject* ret = NULL;
	JsonObject* _tmp0_;
	const gchar* _tmp1_;
	gchar* query = NULL;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	const gchar* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	JsonArray* jarr = NULL;
	JsonArray* _tmp11_;
	gchar* contents = NULL;
	JsonArray* _tmp18_;
	const gchar* _tmp19_;
	gchar* _tmp20_;
	const gchar* _tmp21_;
	const gchar* _tmp22_;
	GRegex* exp = NULL;
	GRegex* _tmp23_;
	gchar* str = NULL;
	gchar* _tmp24_;
	GMatchInfo* mi = NULL;
	GRegex* _tmp25_;
	const gchar* _tmp26_;
	GMatchInfo* _tmp27_ = NULL;
	gboolean _tmp28_;
	gchar** ar = NULL;
	const gchar* _tmp32_;
	gchar** _tmp33_;
	gchar** _tmp34_;
	gint ar_length1;
	gint _ar_size_;
	GError* _inner_error0_ = NULL;
	JsonObject* result;
#line 169 "RooDatabase.vala"
	_tmp0_ = palete_roo_database_readTable (self, table);
#line 169 "RooDatabase.vala"
	ret = _tmp0_;
#line 171 "RooDatabase.vala"
	_tmp1_ = self->DBTYPE;
#line 171 "RooDatabase.vala"
	if (g_strcmp0 (_tmp1_, "MySQL") != 0) {
#line 172 "RooDatabase.vala"
		result = ret;
#line 172 "RooDatabase.vala"
		return result;
#line 1077 "RooDatabase.vala.c"
	}
#line 175 "RooDatabase.vala"
	_tmp2_ = g_strconcat ("\n" \
"\t\t\t\tSELECT \n" \
"\t\t\t\tTABLE_COMMENT \n" \
"\t\t\t\tFROM\n" \
"\t\t\t\tinformation_schema.TABLES\n" \
"\t\t\t\tWHERE\n" \
"\t\t\t\tTABLE_NAME = '", table, NULL);
#line 175 "RooDatabase.vala"
	_tmp3_ = _tmp2_;
#line 175 "RooDatabase.vala"
	_tmp4_ = g_strconcat (_tmp3_, "'\n\t\t\t\tAND\n\t\t\t\tTABLE_SCHEMA = '", NULL);
#line 175 "RooDatabase.vala"
	_tmp5_ = _tmp4_;
#line 175 "RooDatabase.vala"
	_tmp6_ = self->DBNAME;
#line 175 "RooDatabase.vala"
	_tmp7_ = g_strconcat (_tmp5_, _tmp6_, NULL);
#line 175 "RooDatabase.vala"
	_tmp8_ = _tmp7_;
#line 175 "RooDatabase.vala"
	_tmp9_ = g_strconcat (_tmp8_, "'\n\t\t\t", NULL);
#line 175 "RooDatabase.vala"
	_tmp10_ = _tmp9_;
#line 175 "RooDatabase.vala"
	_g_free0 (_tmp8_);
#line 175 "RooDatabase.vala"
	_g_free0 (_tmp5_);
#line 175 "RooDatabase.vala"
	_g_free0 (_tmp3_);
#line 175 "RooDatabase.vala"
	query = _tmp10_;
#line 186 "RooDatabase.vala"
	_tmp11_ = json_array_new ();
#line 186 "RooDatabase.vala"
	jarr = _tmp11_;
#line 1109 "RooDatabase.vala.c"
	{
		GdaDataModel* _tmp12_ = NULL;
		GdaConnection* _tmp13_;
		const gchar* _tmp14_;
		GdaDataModel* _tmp15_;
		JsonArray* _tmp16_;
		JsonArray* _tmp17_;
#line 188 "RooDatabase.vala"
		_tmp13_ = self->cnc;
#line 188 "RooDatabase.vala"
		_tmp14_ = query;
#line 188 "RooDatabase.vala"
		_tmp15_ = gda_connection_execute_select_command (_tmp13_, _tmp14_, &_inner_error0_);
#line 188 "RooDatabase.vala"
		_tmp12_ = _tmp15_;
#line 188 "RooDatabase.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1127 "RooDatabase.vala.c"
			goto __catch0_g_error;
		}
#line 188 "RooDatabase.vala"
		_tmp16_ = palete_roo_database_fetchAll (self, _tmp12_);
#line 188 "RooDatabase.vala"
		_json_array_unref0 (jarr);
#line 188 "RooDatabase.vala"
		jarr = _tmp16_;
#line 191 "RooDatabase.vala"
		_tmp17_ = jarr;
#line 191 "RooDatabase.vala"
		if (json_array_get_length (_tmp17_) < ((guint) 1)) {
#line 192 "RooDatabase.vala"
			result = ret;
#line 192 "RooDatabase.vala"
			_g_object_unref0 (_tmp12_);
#line 192 "RooDatabase.vala"
			_json_array_unref0 (jarr);
#line 192 "RooDatabase.vala"
			_g_free0 (query);
#line 192 "RooDatabase.vala"
			return result;
#line 1150 "RooDatabase.vala.c"
		}
#line 187 "RooDatabase.vala"
		_g_object_unref0 (_tmp12_);
#line 1154 "RooDatabase.vala.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 187 "RooDatabase.vala"
		g_clear_error (&_inner_error0_);
#line 195 "RooDatabase.vala"
		result = ret;
#line 195 "RooDatabase.vala"
		_json_array_unref0 (jarr);
#line 195 "RooDatabase.vala"
		_g_free0 (query);
#line 195 "RooDatabase.vala"
		return result;
#line 1169 "RooDatabase.vala.c"
	}
	__finally0:
#line 187 "RooDatabase.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 187 "RooDatabase.vala"
		_json_array_unref0 (jarr);
#line 187 "RooDatabase.vala"
		_g_free0 (query);
#line 187 "RooDatabase.vala"
		_json_object_unref0 (ret);
#line 187 "RooDatabase.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 187 "RooDatabase.vala"
		g_clear_error (&_inner_error0_);
#line 187 "RooDatabase.vala"
		return NULL;
#line 1186 "RooDatabase.vala.c"
	}
#line 197 "RooDatabase.vala"
	_tmp18_ = jarr;
#line 197 "RooDatabase.vala"
	_tmp19_ = json_array_get_string_element (_tmp18_, (guint) 0);
#line 197 "RooDatabase.vala"
	_tmp20_ = g_strdup (_tmp19_);
#line 197 "RooDatabase.vala"
	contents = _tmp20_;
#line 198 "RooDatabase.vala"
	_tmp21_ = contents;
#line 198 "RooDatabase.vala"
	g_debug ("RooDatabase.vala:198: %s", _tmp21_);
#line 199 "RooDatabase.vala"
	_tmp22_ = contents;
#line 199 "RooDatabase.vala"
	if (_tmp22_ == NULL) {
#line 200 "RooDatabase.vala"
		result = ret;
#line 200 "RooDatabase.vala"
		_g_free0 (contents);
#line 200 "RooDatabase.vala"
		_json_array_unref0 (jarr);
#line 200 "RooDatabase.vala"
		_g_free0 (query);
#line 200 "RooDatabase.vala"
		return result;
#line 1214 "RooDatabase.vala.c"
	}
#line 203 "RooDatabase.vala"
	_tmp23_ = _g_regex_ref0 (_thread_safe_regex_init (&_tmp_regex_0, "FK\\(([^\\)]+)\\)", 0));
#line 203 "RooDatabase.vala"
	exp = _tmp23_;
#line 204 "RooDatabase.vala"
	_tmp24_ = g_strdup ("");
#line 204 "RooDatabase.vala"
	str = _tmp24_;
#line 207 "RooDatabase.vala"
	_tmp25_ = exp;
#line 207 "RooDatabase.vala"
	_tmp26_ = contents;
#line 207 "RooDatabase.vala"
	_tmp28_ = g_regex_match (_tmp25_, _tmp26_, 0, &_tmp27_);
#line 207 "RooDatabase.vala"
	_g_match_info_unref0 (mi);
#line 207 "RooDatabase.vala"
	mi = _tmp27_;
#line 207 "RooDatabase.vala"
	if (_tmp28_) {
#line 1236 "RooDatabase.vala.c"
		GMatchInfo* _tmp29_;
		gchar* _tmp30_;
		const gchar* _tmp31_;
#line 209 "RooDatabase.vala"
		_tmp29_ = mi;
#line 209 "RooDatabase.vala"
		_tmp30_ = g_match_info_fetch (_tmp29_, 1);
#line 209 "RooDatabase.vala"
		_g_free0 (str);
#line 209 "RooDatabase.vala"
		str = _tmp30_;
#line 210 "RooDatabase.vala"
		_tmp31_ = str;
#line 210 "RooDatabase.vala"
		g_debug ("RooDatabase.vala:210: match = %s", _tmp31_);
#line 1252 "RooDatabase.vala.c"
	}
#line 213 "RooDatabase.vala"
	_tmp32_ = str;
#line 213 "RooDatabase.vala"
	_tmp34_ = _tmp33_ = g_strsplit (_tmp32_, "\n", 0);
#line 213 "RooDatabase.vala"
	ar = _tmp34_;
#line 213 "RooDatabase.vala"
	ar_length1 = _vala_array_length (_tmp33_);
#line 213 "RooDatabase.vala"
	_ar_size_ = ar_length1;
#line 1264 "RooDatabase.vala.c"
	{
		gint i = 0;
#line 214 "RooDatabase.vala"
		i = 0;
#line 1269 "RooDatabase.vala.c"
		{
			gboolean _tmp35_ = FALSE;
#line 214 "RooDatabase.vala"
			_tmp35_ = TRUE;
#line 214 "RooDatabase.vala"
			while (TRUE) {
#line 1276 "RooDatabase.vala.c"
				gchar** _tmp37_;
				gint _tmp37__length1;
				gchar** kv = NULL;
				gchar** _tmp38_;
				gint _tmp38__length1;
				const gchar* _tmp39_;
				gchar** _tmp40_;
				gchar** _tmp41_;
				gint kv_length1;
				gint _kv_size_;
				JsonObject* _tmp42_;
				gchar** _tmp43_;
				gint _tmp43__length1;
				const gchar* _tmp44_;
				gchar* _tmp45_;
				gchar* _tmp46_;
				gboolean _tmp47_;
				JsonObject* o = NULL;
				JsonObject* _tmp48_;
				gchar** _tmp49_;
				gint _tmp49__length1;
				const gchar* _tmp50_;
				gchar* _tmp51_;
				gchar* _tmp52_;
				JsonObject* _tmp53_;
				JsonObject* _tmp54_;
				JsonObject* _tmp55_;
				gchar** lr = NULL;
				gchar** _tmp56_;
				gint _tmp56__length1;
				const gchar* _tmp57_;
				gchar** _tmp58_;
				gchar** _tmp59_;
				gint lr_length1;
				gint _lr_size_;
				JsonObject* _tmp60_;
				gchar** _tmp61_;
				gint _tmp61__length1;
				const gchar* _tmp62_;
				gchar* _tmp63_;
				gchar* _tmp64_;
				JsonObject* _tmp65_;
				gchar** _tmp66_;
				gint _tmp66__length1;
				const gchar* _tmp67_;
				gchar* _tmp68_;
				gchar* _tmp69_;
				JsonObject* _tmp70_;
				gchar** _tmp71_;
				gint _tmp71__length1;
				const gchar* _tmp72_;
				gchar* _tmp73_;
				gchar* _tmp74_;
				JsonObject* _tmp75_;
#line 214 "RooDatabase.vala"
				if (!_tmp35_) {
#line 1333 "RooDatabase.vala.c"
					gint _tmp36_;
#line 214 "RooDatabase.vala"
					_tmp36_ = i;
#line 214 "RooDatabase.vala"
					i = _tmp36_ + 1;
#line 1339 "RooDatabase.vala.c"
				}
#line 214 "RooDatabase.vala"
				_tmp35_ = FALSE;
#line 214 "RooDatabase.vala"
				_tmp37_ = ar;
#line 214 "RooDatabase.vala"
				_tmp37__length1 = ar_length1;
#line 214 "RooDatabase.vala"
				if (!(i < _tmp37__length1)) {
#line 214 "RooDatabase.vala"
					break;
#line 1351 "RooDatabase.vala.c"
				}
#line 215 "RooDatabase.vala"
				_tmp38_ = ar;
#line 215 "RooDatabase.vala"
				_tmp38__length1 = ar_length1;
#line 215 "RooDatabase.vala"
				_tmp39_ = _tmp38_[i];
#line 215 "RooDatabase.vala"
				_tmp41_ = _tmp40_ = g_strsplit (_tmp39_, "=", 0);
#line 215 "RooDatabase.vala"
				kv = _tmp41_;
#line 215 "RooDatabase.vala"
				kv_length1 = _vala_array_length (_tmp40_);
#line 215 "RooDatabase.vala"
				_kv_size_ = kv_length1;
#line 216 "RooDatabase.vala"
				_tmp42_ = ret;
#line 216 "RooDatabase.vala"
				_tmp43_ = kv;
#line 216 "RooDatabase.vala"
				_tmp43__length1 = kv_length1;
#line 216 "RooDatabase.vala"
				_tmp44_ = _tmp43_[0];
#line 216 "RooDatabase.vala"
				_tmp45_ = string_strip (_tmp44_);
#line 216 "RooDatabase.vala"
				_tmp46_ = _tmp45_;
#line 216 "RooDatabase.vala"
				_tmp47_ = !json_object_has_member (_tmp42_, _tmp46_);
#line 216 "RooDatabase.vala"
				_g_free0 (_tmp46_);
#line 216 "RooDatabase.vala"
				if (_tmp47_) {
#line 217 "RooDatabase.vala"
					kv = (_vala_array_free (kv, kv_length1, (GDestroyNotify) g_free), NULL);
#line 217 "RooDatabase.vala"
					continue;
#line 1389 "RooDatabase.vala.c"
				}
#line 219 "RooDatabase.vala"
				_tmp48_ = ret;
#line 219 "RooDatabase.vala"
				_tmp49_ = kv;
#line 219 "RooDatabase.vala"
				_tmp49__length1 = kv_length1;
#line 219 "RooDatabase.vala"
				_tmp50_ = _tmp49_[0];
#line 219 "RooDatabase.vala"
				_tmp51_ = string_strip (_tmp50_);
#line 219 "RooDatabase.vala"
				_tmp52_ = _tmp51_;
#line 219 "RooDatabase.vala"
				_tmp53_ = json_object_get_object_member (_tmp48_, _tmp52_);
#line 219 "RooDatabase.vala"
				_tmp54_ = _json_object_ref0 (_tmp53_);
#line 219 "RooDatabase.vala"
				_tmp55_ = _tmp54_;
#line 219 "RooDatabase.vala"
				_g_free0 (_tmp52_);
#line 219 "RooDatabase.vala"
				o = _tmp55_;
#line 222 "RooDatabase.vala"
				_tmp56_ = kv;
#line 222 "RooDatabase.vala"
				_tmp56__length1 = kv_length1;
#line 222 "RooDatabase.vala"
				_tmp57_ = _tmp56_[1];
#line 222 "RooDatabase.vala"
				_tmp59_ = _tmp58_ = g_strsplit (_tmp57_, ":", 0);
#line 222 "RooDatabase.vala"
				lr = _tmp59_;
#line 222 "RooDatabase.vala"
				lr_length1 = _vala_array_length (_tmp58_);
#line 222 "RooDatabase.vala"
				_lr_size_ = lr_length1;
#line 223 "RooDatabase.vala"
				_tmp60_ = o;
#line 223 "RooDatabase.vala"
				_tmp61_ = lr;
#line 223 "RooDatabase.vala"
				_tmp61__length1 = lr_length1;
#line 223 "RooDatabase.vala"
				_tmp62_ = _tmp61_[0];
#line 223 "RooDatabase.vala"
				_tmp63_ = string_strip (_tmp62_);
#line 223 "RooDatabase.vala"
				_tmp64_ = _tmp63_;
#line 223 "RooDatabase.vala"
				json_object_set_string_member (_tmp60_, "relates_to_table", _tmp64_);
#line 223 "RooDatabase.vala"
				_g_free0 (_tmp64_);
#line 224 "RooDatabase.vala"
				_tmp65_ = o;
#line 224 "RooDatabase.vala"
				_tmp66_ = lr;
#line 224 "RooDatabase.vala"
				_tmp66__length1 = lr_length1;
#line 224 "RooDatabase.vala"
				_tmp67_ = _tmp66_[1];
#line 224 "RooDatabase.vala"
				_tmp68_ = string_strip (_tmp67_);
#line 224 "RooDatabase.vala"
				_tmp69_ = _tmp68_;
#line 224 "RooDatabase.vala"
				json_object_set_string_member (_tmp65_, "relates_to_col", _tmp69_);
#line 224 "RooDatabase.vala"
				_g_free0 (_tmp69_);
#line 225 "RooDatabase.vala"
				_tmp70_ = o;
#line 225 "RooDatabase.vala"
				_tmp71_ = lr;
#line 225 "RooDatabase.vala"
				_tmp71__length1 = lr_length1;
#line 225 "RooDatabase.vala"
				_tmp72_ = _tmp71_[0];
#line 225 "RooDatabase.vala"
				_tmp73_ = string_strip (_tmp72_);
#line 225 "RooDatabase.vala"
				_tmp74_ = _tmp73_;
#line 225 "RooDatabase.vala"
				_tmp75_ = palete_roo_database_readTable (self, _tmp74_);
#line 225 "RooDatabase.vala"
				json_object_set_object_member (_tmp70_, "relates_to_schema", _tmp75_);
#line 225 "RooDatabase.vala"
				_g_free0 (_tmp74_);
#line 214 "RooDatabase.vala"
				lr = (_vala_array_free (lr, lr_length1, (GDestroyNotify) g_free), NULL);
#line 214 "RooDatabase.vala"
				_json_object_unref0 (o);
#line 214 "RooDatabase.vala"
				kv = (_vala_array_free (kv, kv_length1, (GDestroyNotify) g_free), NULL);
#line 1483 "RooDatabase.vala.c"
			}
		}
	}
#line 230 "RooDatabase.vala"
	result = ret;
#line 230 "RooDatabase.vala"
	ar = (_vala_array_free (ar, ar_length1, (GDestroyNotify) g_free), NULL);
#line 230 "RooDatabase.vala"
	_g_match_info_unref0 (mi);
#line 230 "RooDatabase.vala"
	_g_free0 (str);
#line 230 "RooDatabase.vala"
	_g_regex_unref0 (exp);
#line 230 "RooDatabase.vala"
	_g_free0 (contents);
#line 230 "RooDatabase.vala"
	_json_array_unref0 (jarr);
#line 230 "RooDatabase.vala"
	_g_free0 (query);
#line 230 "RooDatabase.vala"
	return result;
#line 1505 "RooDatabase.vala.c"
}

static GValue*
_g_value_dup (GValue* self)
{
#line 266 "RooDatabase.vala"
	return g_boxed_copy (G_TYPE_VALUE, self);
#line 1513 "RooDatabase.vala.c"
}

static gpointer
__g_value_dup0 (gpointer self)
{
#line 266 "RooDatabase.vala"
	return self ? _g_value_dup (self) : NULL;
#line 1521 "RooDatabase.vala.c"
}

static void
_vala_GValue_free (GValue* self)
{
#line 265 "RooDatabase.vala"
	g_boxed_free (G_TYPE_VALUE, self);
#line 1529 "RooDatabase.vala.c"
}

JsonArray*
palete_roo_database_fetchAll (PaleteRooDatabase* self,
                              GdaDataModel* qnr)
{
	GeeArrayList* cols = NULL;
	GeeArrayList* _tmp0_;
	JsonArray* res = NULL;
	JsonArray* _tmp5_;
	GError* _inner_error0_ = NULL;
	JsonArray* result;
#line 235 "RooDatabase.vala"
	_tmp0_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL);
#line 235 "RooDatabase.vala"
	cols = _tmp0_;
#line 1546 "RooDatabase.vala.c"
	{
		gint i = 0;
#line 237 "RooDatabase.vala"
		i = 0;
#line 1551 "RooDatabase.vala.c"
		{
			gboolean _tmp1_ = FALSE;
#line 237 "RooDatabase.vala"
			_tmp1_ = TRUE;
#line 237 "RooDatabase.vala"
			while (TRUE) {
#line 1558 "RooDatabase.vala.c"
				GeeArrayList* _tmp3_;
				const gchar* _tmp4_;
#line 237 "RooDatabase.vala"
				if (!_tmp1_) {
#line 1563 "RooDatabase.vala.c"
					gint _tmp2_;
#line 237 "RooDatabase.vala"
					_tmp2_ = i;
#line 237 "RooDatabase.vala"
					i = _tmp2_ + 1;
#line 1569 "RooDatabase.vala.c"
				}
#line 237 "RooDatabase.vala"
				_tmp1_ = FALSE;
#line 237 "RooDatabase.vala"
				if (!(i < gda_data_model_get_n_columns (qnr))) {
#line 237 "RooDatabase.vala"
					break;
#line 1577 "RooDatabase.vala.c"
				}
#line 238 "RooDatabase.vala"
				_tmp3_ = cols;
#line 238 "RooDatabase.vala"
				_tmp4_ = gda_data_model_get_column_name (qnr, i);
#line 238 "RooDatabase.vala"
				gee_abstract_collection_add ((GeeAbstractCollection*) _tmp3_, _tmp4_);
#line 1585 "RooDatabase.vala.c"
			}
		}
	}
#line 242 "RooDatabase.vala"
	_tmp5_ = json_array_new ();
#line 242 "RooDatabase.vala"
	res = _tmp5_;
#line 1593 "RooDatabase.vala.c"
	{
		gint r = 0;
#line 245 "RooDatabase.vala"
		r = 0;
#line 1598 "RooDatabase.vala.c"
		{
			gboolean _tmp6_ = FALSE;
#line 245 "RooDatabase.vala"
			_tmp6_ = TRUE;
#line 245 "RooDatabase.vala"
			while (TRUE) {
#line 1605 "RooDatabase.vala.c"
				GeeArrayList* _tmp8_;
				gint _tmp9_;
				gint _tmp10_;
				JsonObject* add = NULL;
				JsonObject* _tmp15_;
				JsonArray* _tmp41_;
				JsonObject* _tmp42_;
				JsonObject* _tmp43_;
#line 245 "RooDatabase.vala"
				if (!_tmp6_) {
#line 1616 "RooDatabase.vala.c"
					gint _tmp7_;
#line 245 "RooDatabase.vala"
					_tmp7_ = r;
#line 245 "RooDatabase.vala"
					r = _tmp7_ + 1;
#line 1622 "RooDatabase.vala.c"
				}
#line 245 "RooDatabase.vala"
				_tmp6_ = FALSE;
#line 245 "RooDatabase.vala"
				if (!(r < gda_data_model_get_n_rows (qnr))) {
#line 245 "RooDatabase.vala"
					break;
#line 1630 "RooDatabase.vala.c"
				}
#line 250 "RooDatabase.vala"
				_tmp8_ = cols;
#line 250 "RooDatabase.vala"
				_tmp9_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp8_);
#line 250 "RooDatabase.vala"
				_tmp10_ = _tmp9_;
#line 250 "RooDatabase.vala"
				if (_tmp10_ == 1) {
#line 1640 "RooDatabase.vala.c"
					{
						GValue* _tmp11_ = NULL;
						JsonArray* _tmp12_;
						const gchar* _tmp13_;
#line 254 "RooDatabase.vala"
						_tmp11_ = gda_data_model_get_value_at (qnr, 0, r, &_inner_error0_);
#line 254 "RooDatabase.vala"
						if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1649 "RooDatabase.vala.c"
							goto __catch0_g_error;
						}
#line 254 "RooDatabase.vala"
						_tmp12_ = res;
#line 254 "RooDatabase.vala"
						_tmp13_ = g_value_get_string (_tmp11_);
#line 254 "RooDatabase.vala"
						json_array_add_string_element (_tmp12_, _tmp13_);
#line 1658 "RooDatabase.vala.c"
					}
					goto __finally0;
					__catch0_g_error:
					{
						JsonArray* _tmp14_;
#line 253 "RooDatabase.vala"
						g_clear_error (&_inner_error0_);
#line 256 "RooDatabase.vala"
						_tmp14_ = res;
#line 256 "RooDatabase.vala"
						json_array_add_string_element (_tmp14_, "");
#line 1670 "RooDatabase.vala.c"
					}
					__finally0:
#line 253 "RooDatabase.vala"
					if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 253 "RooDatabase.vala"
						_json_array_unref0 (res);
#line 253 "RooDatabase.vala"
						_g_object_unref0 (cols);
#line 253 "RooDatabase.vala"
						g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 253 "RooDatabase.vala"
						g_clear_error (&_inner_error0_);
#line 253 "RooDatabase.vala"
						return NULL;
#line 1685 "RooDatabase.vala.c"
					}
#line 258 "RooDatabase.vala"
					continue;
#line 1689 "RooDatabase.vala.c"
				}
#line 261 "RooDatabase.vala"
				_tmp15_ = json_object_new ();
#line 261 "RooDatabase.vala"
				add = _tmp15_;
#line 1695 "RooDatabase.vala.c"
				{
					gint i = 0;
#line 263 "RooDatabase.vala"
					i = 0;
#line 1700 "RooDatabase.vala.c"
					{
						gboolean _tmp16_ = FALSE;
#line 263 "RooDatabase.vala"
						_tmp16_ = TRUE;
#line 263 "RooDatabase.vala"
						while (TRUE) {
#line 1707 "RooDatabase.vala.c"
							GeeArrayList* _tmp18_;
							gint _tmp19_;
							gint _tmp20_;
							gchar* n = NULL;
							GeeArrayList* _tmp21_;
							gpointer _tmp22_;
#line 263 "RooDatabase.vala"
							if (!_tmp16_) {
#line 1716 "RooDatabase.vala.c"
								gint _tmp17_;
#line 263 "RooDatabase.vala"
								_tmp17_ = i;
#line 263 "RooDatabase.vala"
								i = _tmp17_ + 1;
#line 1722 "RooDatabase.vala.c"
							}
#line 263 "RooDatabase.vala"
							_tmp16_ = FALSE;
#line 263 "RooDatabase.vala"
							_tmp18_ = cols;
#line 263 "RooDatabase.vala"
							_tmp19_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp18_);
#line 263 "RooDatabase.vala"
							_tmp20_ = _tmp19_;
#line 263 "RooDatabase.vala"
							if (!(i < _tmp20_)) {
#line 263 "RooDatabase.vala"
								break;
#line 1736 "RooDatabase.vala.c"
							}
#line 264 "RooDatabase.vala"
							_tmp21_ = cols;
#line 264 "RooDatabase.vala"
							_tmp22_ = gee_abstract_list_get ((GeeAbstractList*) _tmp21_, i);
#line 264 "RooDatabase.vala"
							n = (gchar*) _tmp22_;
#line 1744 "RooDatabase.vala.c"
							{
								GValue* val = NULL;
								GValue* _tmp23_;
								gchar* type = NULL;
								GValue* _tmp24_;
								const gchar* _tmp25_;
								gchar* _tmp26_;
								const gchar* _tmp27_;
								const gchar* _tmp28_;
								GQuark _tmp30_ = 0U;
#line 269 "RooDatabase.vala"
								static GQuark _tmp29_label0 = 0;
#line 269 "RooDatabase.vala"
								static GQuark _tmp29_label1 = 0;
#line 269 "RooDatabase.vala"
								static GQuark _tmp29_label2 = 0;
#line 266 "RooDatabase.vala"
								_tmp23_ = __g_value_dup0 (gda_data_model_get_value_at (qnr, i, r, &_inner_error0_));
#line 266 "RooDatabase.vala"
								val = _tmp23_;
#line 266 "RooDatabase.vala"
								if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1767 "RooDatabase.vala.c"
									goto __catch1_g_error;
								}
#line 267 "RooDatabase.vala"
								_tmp24_ = val;
#line 267 "RooDatabase.vala"
								_tmp25_ = g_type_name (G_VALUE_TYPE (_tmp24_));
#line 267 "RooDatabase.vala"
								_tmp26_ = g_strdup (_tmp25_);
#line 267 "RooDatabase.vala"
								type = _tmp26_;
#line 269 "RooDatabase.vala"
								_tmp27_ = type;
#line 269 "RooDatabase.vala"
								_tmp28_ = _tmp27_;
#line 269 "RooDatabase.vala"
								_tmp30_ = (NULL == _tmp28_) ? 0 : g_quark_from_string (_tmp28_);
#line 269 "RooDatabase.vala"
								if ((_tmp30_ == ((0 != _tmp29_label0) ? _tmp29_label0 : (_tmp29_label0 = g_quark_from_static_string ("GdaBinary")))) || (_tmp30_ == ((0 != _tmp29_label1) ? _tmp29_label1 : (_tmp29_label1 = g_quark_from_static_string ("GdaBlob"))))) {
#line 269 "RooDatabase.vala"
									switch (0) {
#line 1788 "RooDatabase.vala.c"
										default:
										{
											JsonObject* _tmp31_;
											const gchar* _tmp32_;
#line 272 "RooDatabase.vala"
											_tmp31_ = add;
#line 272 "RooDatabase.vala"
											_tmp32_ = n;
#line 272 "RooDatabase.vala"
											json_object_set_string_member (_tmp31_, _tmp32_, "?? big string ??");
#line 273 "RooDatabase.vala"
											break;
#line 1801 "RooDatabase.vala.c"
										}
									}
								} else if (_tmp30_ == ((0 != _tmp29_label2) ? _tmp29_label2 : (_tmp29_label2 = g_quark_from_static_string ("GdaNull")))) {
#line 269 "RooDatabase.vala"
									switch (0) {
#line 1807 "RooDatabase.vala.c"
										default:
										{
											JsonObject* _tmp33_;
											const gchar* _tmp34_;
#line 276 "RooDatabase.vala"
											_tmp33_ = add;
#line 276 "RooDatabase.vala"
											_tmp34_ = n;
#line 276 "RooDatabase.vala"
											json_object_set_null_member (_tmp33_, _tmp34_);
#line 277 "RooDatabase.vala"
											break;
#line 1820 "RooDatabase.vala.c"
										}
									}
								} else {
#line 269 "RooDatabase.vala"
									switch (0) {
#line 1826 "RooDatabase.vala.c"
										default:
										{
											JsonObject* _tmp35_;
											const gchar* _tmp36_;
											GValue* _tmp37_;
											const gchar* _tmp38_;
#line 280 "RooDatabase.vala"
											_tmp35_ = add;
#line 280 "RooDatabase.vala"
											_tmp36_ = n;
#line 280 "RooDatabase.vala"
											_tmp37_ = val;
#line 280 "RooDatabase.vala"
											_tmp38_ = g_value_get_string (_tmp37_);
#line 280 "RooDatabase.vala"
											json_object_set_string_member (_tmp35_, _tmp36_, _tmp38_);
#line 281 "RooDatabase.vala"
											break;
#line 1845 "RooDatabase.vala.c"
										}
									}
								}
#line 265 "RooDatabase.vala"
								_g_free0 (type);
#line 265 "RooDatabase.vala"
								__vala_GValue_free0 (val);
#line 1853 "RooDatabase.vala.c"
							}
							goto __finally1;
							__catch1_g_error:
							{
								JsonObject* _tmp39_;
								const gchar* _tmp40_;
#line 265 "RooDatabase.vala"
								g_clear_error (&_inner_error0_);
#line 284 "RooDatabase.vala"
								_tmp39_ = add;
#line 284 "RooDatabase.vala"
								_tmp40_ = n;
#line 284 "RooDatabase.vala"
								json_object_set_string_member (_tmp39_, _tmp40_, "");
#line 1868 "RooDatabase.vala.c"
							}
							__finally1:
#line 265 "RooDatabase.vala"
							if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 265 "RooDatabase.vala"
								_g_free0 (n);
#line 265 "RooDatabase.vala"
								_json_object_unref0 (add);
#line 265 "RooDatabase.vala"
								_json_array_unref0 (res);
#line 265 "RooDatabase.vala"
								_g_object_unref0 (cols);
#line 265 "RooDatabase.vala"
								g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 265 "RooDatabase.vala"
								g_clear_error (&_inner_error0_);
#line 265 "RooDatabase.vala"
								return NULL;
#line 1887 "RooDatabase.vala.c"
							}
#line 263 "RooDatabase.vala"
							_g_free0 (n);
#line 1891 "RooDatabase.vala.c"
						}
					}
				}
#line 289 "RooDatabase.vala"
				_tmp41_ = res;
#line 289 "RooDatabase.vala"
				_tmp42_ = add;
#line 289 "RooDatabase.vala"
				_tmp43_ = _json_object_ref0 (_tmp42_);
#line 289 "RooDatabase.vala"
				json_array_add_object_element (_tmp41_, _tmp43_);
#line 245 "RooDatabase.vala"
				_json_object_unref0 (add);
#line 1905 "RooDatabase.vala.c"
			}
		}
	}
#line 292 "RooDatabase.vala"
	result = res;
#line 292 "RooDatabase.vala"
	_g_object_unref0 (cols);
#line 292 "RooDatabase.vala"
	return result;
#line 1915 "RooDatabase.vala.c"
}

PaleteRooDatabase*
palete_roo_database_construct (GType object_type)
{
	PaleteRooDatabase * self = NULL;
#line 14 "RooDatabase.vala"
	self = (PaleteRooDatabase*) g_object_new (object_type, NULL);
#line 14 "RooDatabase.vala"
	return self;
#line 1926 "RooDatabase.vala.c"
}

PaleteRooDatabase*
palete_roo_database_new (void)
{
#line 14 "RooDatabase.vala"
	return palete_roo_database_construct (PALETE_TYPE_ROO_DATABASE);
#line 1934 "RooDatabase.vala.c"
}

static void
palete_roo_database_class_init (PaleteRooDatabaseClass * klass,
                                gpointer klass_data)
{
#line 14 "RooDatabase.vala"
	palete_roo_database_parent_class = g_type_class_peek_parent (klass);
#line 14 "RooDatabase.vala"
	G_OBJECT_CLASS (klass)->finalize = palete_roo_database_finalize;
#line 1945 "RooDatabase.vala.c"
}

static void
palete_roo_database_instance_init (PaleteRooDatabase * self,
                                   gpointer klass)
{
}

static void
palete_roo_database_finalize (GObject * obj)
{
	PaleteRooDatabase * self;
#line 14 "RooDatabase.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PALETE_TYPE_ROO_DATABASE, PaleteRooDatabase);
#line 16 "RooDatabase.vala"
	_g_object_unref0 (self->project);
#line 18 "RooDatabase.vala"
	_g_free0 (self->DBTYPE);
#line 19 "RooDatabase.vala"
	_g_free0 (self->DBNAME);
#line 21 "RooDatabase.vala"
	_g_object_unref0 (self->cnc);
#line 14 "RooDatabase.vala"
	G_OBJECT_CLASS (palete_roo_database_parent_class)->finalize (obj);
#line 1970 "RooDatabase.vala.c"
}

static GType
palete_roo_database_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (PaleteRooDatabaseClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) palete_roo_database_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PaleteRooDatabase), 0, (GInstanceInitFunc) palete_roo_database_instance_init, NULL };
	GType palete_roo_database_type_id;
	palete_roo_database_type_id = g_type_register_static (G_TYPE_OBJECT, "PaleteRooDatabase", &g_define_type_info, 0);
	return palete_roo_database_type_id;
}

GType
palete_roo_database_get_type (void)
{
	static volatile gsize palete_roo_database_type_id__once = 0;
	if (g_once_init_enter (&palete_roo_database_type_id__once)) {
		GType palete_roo_database_type_id;
		palete_roo_database_type_id = palete_roo_database_get_type_once ();
		g_once_init_leave (&palete_roo_database_type_id__once, palete_roo_database_type_id);
	}
	return palete_roo_database_type_id__once;
}

static void
_vala_array_destroy (gpointer array,
                     gssize array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gssize i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gssize array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

static gssize
_vala_array_length (gpointer array)
{
	gssize length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}

static inline gpointer
_vala_memdup2 (gconstpointer mem,
               gsize byte_size)
{
	gpointer new_mem;
	if (mem && byte_size != 0) {
		new_mem = g_malloc (byte_size);
		memcpy (new_mem, mem, byte_size);
	} else {
		new_mem = NULL;
	}
	return new_mem;
}

